# 功能
把一种语言转换为另一种语言
	1. 高级编程语言转换为机器语言
## 编译流程
1. [[词法]]分析
	1. 输入与输出：将**代码**字符串转换为一系列的**token**。
	2. 具体过程：就是按照某个语言的语法去解析字符串的过程。将人为书写的**代码**字符串转化为这个语言所定义的**基本单位**token（比如一个加法运算的左值，右值，加号）
2. 语法分析
	1. 根据token，输出**初始的[[AST]]**，
3. 语义分析
	1. 遍历初始的AST的结构，对其节点的属性进行补全，输出**补全的AST**，
4. 中间代码生成[^1]
	1. 如果当前编译器想适配==多个平台==[^2]使用，只需单独开发每个平台的编译器后端即可[^3]，前端部分可共用
5. 目标代码生成
![[Pasted image 20220724172032.png]]
## 编译流程的参与者
词法分析器
语法分析器
语义分析器

编译器实例
	1. [[babel]] 
	2. [[LibSass]] 

# 手写
## 把LIST语言转换成C语言代码
1. parsing
	1. tokenizing: tokenizer函数
	2. parser函数![[Pasted image 20220724173735.png]]
2. transformation:
	1. traverser函数：深度优先地遍历AST
	2. transformer函数：遍历到每个节点时调用，把旧AST转换成一颗新树
3. code generator
	1. 都是高级语言，实现起来较为简单
	2. 深度优先地去遍历新AST，将每个节点组合成新代码
4. 最终![[Pasted image 20220724174037.png]]
babel的核心开发者实现了一个简易的编译器demo，源码只有几百行。[super tiny compiler](https://github.com/jamiebuilds/the-super-tiny-compiler)



[^1]: 有多个代码平台时需要的步骤。将AST生成为平台无关的中间代码。不存在多个平台时，语义分析后直接生成目标平台代码（如babel）
[^2]: windows, linux, mac
[^3]: 什么是“编译器后端”？