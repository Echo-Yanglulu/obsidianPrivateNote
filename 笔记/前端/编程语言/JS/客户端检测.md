# 概述
**跨平台的浏览器**即使版本相同，也会存在不同的问题。这些差异迫使开发者使用各种方法检测客户端。

客户端检测一直是web开发中饱受争议的话题。
	1. 普遍认为所有浏览器都应支持一组公共特性

关键：客户端检测是解决问题的“不得已而为之”的最后一步考量。
# 能力检测
定义：在JS[[宿主环境]]中使用一套检测逻辑，测试宿主环境是否支持某种特性。
特点：这种方式不关心特定浏览器的信息，只关心是否存在所需特性。
规范
	1. 先检测最**常用**的能力
		1. 先检测document.getElementById，再检测document.all
	2. 必须直接检测切实**需要**的能力
		1. 如果要根据IE获取DOM元素，不要间接通过检测document.all等方法是否存在判断，而是使用浏览器分析。
## 基本模式
```js
if (object.propertyInQuestion) {
  // 使用object.propertyInQuestion
}
// IE5之前的版本中没有document.getElementById()这个DOM方法，但可以通过document.all属性实现同样的功能。
function getElement(id) {
  if (document.getElementById) {
    return document.getElementById(id);
  } else if (document.all) {
    return document.all[id];
  } else {
    throw new Error("No way to retrieve element!");
  }
}
```
## 安全能力检测
不要只是检测某个特性是否存在，而是检测该特性的数据类型是否是期望类型。

推荐使用typeof进行安全能力检测
但某些宿主对象并不保证typeof返回合理的值，如IE8以下的浏览器中，typeof document.createElement返回'object'
## 浏览器分析
使用**能力检测**，而不是使用**用户代理检测**分析运行代码的浏览器的原因在于，用户代理字符串很容易伪造。
仿造能够欺骗*能力检测*的浏览器特性却很难。
### 检测特性
可按照能力将浏览器归类。
如果当前web应用需要使用特定的浏览器能力，应当在一开始进行所有检测，而非用到时再重复进行检测。
```js
// 检测浏览器是否支持Netscape式的插件
let hasNSPlugins = !!(navigator.plugins && navigator.plugins.length);

// 检测浏览器是否具有DOM Level 1能力
let hasDOM1 = !!(document.getElementById && document.createElement &&
         document.getElementsByTagName);
```
### 检测浏览器
### 检测的局限
# 用户代理检测

# 硬件、软件检测
