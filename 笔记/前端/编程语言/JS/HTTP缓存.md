# 缓存
一般用于保存[[静态资源]]：==常见文档==
当**强制缓存**不可用（本地对比Expires）时尝试**协商缓存**（请求对比ETag || Last-Modified），如果协商返回304就使用缓存，否则重新请求。
## 强制缓存(CCE)
1. Cache-Control
2. Expires(老字段，已被CC代替)
流程
	1. **初次请求**时，返回**资源、Cache-Control**：max-age=3153600【单位是秒】
		2. no-cache：不使用强制缓存，让服务端处理
		3. no-store：不用本地缓存和服务端缓存，每次请求都**回源**即可
		4. private
		5. public
	2. **二次请求**，如果本地检验**Cache-Control未过期**，使用该缓存，返回200（disk cache）
本地缓存与请求的URL有关，所以要更新本地缓存，只需更新资源的URL，让用户打开页面时，元素请求的链接是新的静态资源文件名。
用什么修改静态资源的文件名？
	1. 版本号
		1. 每次都要全量更新
	2. hash
## 协商缓存(LME)
是**服务端的缓存策略**
1. 使用Last-Modified
2. 使用ETag
流程
	1. 由服务端判断，是否需要
		1. 客户端与服务端现在存的资源一样，提示304
		2. 不一样，返回最新资源，提示200、
	2. 初次请求，返回**资源、Last-Modified** 
	3. 二次请求，**请求头带着if-modified-since** 
		1. 返回304
		2. 或返回新Last-Modified和资源
服务器会告诉浏览器，请求的资源已经多久没有更改过。浏览器发现这段时间内请求过这个资源，就直接使用缓存资源。