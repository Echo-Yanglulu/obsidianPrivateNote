# 起源/背景
**web 应用程序出现**，开始出现在*客户端存储用户信息*的需求。因为与特定用户相关的信息应该保存在用户的机器上（登录信息，个人偏好），web 应用提供者需要办法把**用户相关的信息存储在客户端**。
## 内容
应用程序离线时在客户端机器上存储数据的各种技术
	1. cookie
	2. webStorage
	3. indexDB
# 解决方案
## [[cookie]] 
## [[Web Storage]] 
cookie 与 webStorage 的区别
	1. 背景
		1. 都是客户端存储。
		2. cookie：HTTP 是无状态的，为了协助 web 保存状态。
		3. [[sessionStorage]]: Cookie 之外的另一种存储会话的途径
	2. 设置：客户端与服务端都可设置；仅客户端设置
	3. 读取：当 HTTP-only 时客户端不可读取；仅客户端可读取
	4. 修改：声明式修改；API 调用
	5. 大小：每个4k；5M
	6. 生命周期
		1. cookie、sessionStorage ：浏览器会话，
		2. localStorage：永久
	7. [[作用域]] 
		1. cookie：特定域、路径、时间、SSL 下
		2. [[localStorage]]：相同域即可读取
		3. [[sessionStorage]]：相同域且相同*标签页* 
	8. 工作方式：
		1. 每次发送到绑定域请求都会被携带；不会发送给服务端
	9. 应用
		1. cookie
			1. 会话状态管理（用户登录状态、购物车、游戏分数或其它需要记录的信息）
			2. 个性化设置（用户自定义设置、主题等）
			3. 浏览器行为跟踪（跟踪分析用户行为等。记录用户浏览数据，进行广告推送）
		2. WebStorage

如果只有 cookie 没有 [[sessionStorage]]，那么登录结构是不完善的。![[Pasted image 20230802114940.png]]
	1. cookie 用于登录难，存储用户标识（如 useID）
	2. session 在服务端，存储用户详细信息，与 cookie 信息一一对应
	3. 两者结合是常见验证登录解决方案
		1. 背景/原因
			1. 安全：如果不使用 session，携带大量用户信息的 cookie 被劫持，会导致用户信息泄漏
			2. 大小：有些网站保存的用户信息很详细，体积会比较大
				1. cookie 本身限制较小
				2. 每次请求也会有性能问题。
		2. 流程
			1. 用户发送用户名、密码到服务器
			2. 服务器验证后，将*用户信息*保存到服务端的 session 缓存中，将 userID（*用户标识*） 保存到客户端的 cookie
			3. 客户端请求时通过 cookie 携带用户标识，服务端根据用户标识去 session 中获取用户信息。
## [[indexDB]] 
大规模的、结构复杂的数据