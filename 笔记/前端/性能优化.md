# 概述
定义：从用户开始访问网站，到页面完整展示的过程中。使用策略与方法，使页面加载更快、用户操作的响应更及时
## 原则
1. 空间换时间。适用于所有编程的性能优化
	1. 多使用内存、缓存。减少计算、网络请求
2. 减少CPU计算量，减少网络加载耗时

综合策略
	1. [[SSR]]：减少请求，提高速度
	2. 代码压缩：网络传输更快，
# 静态资源

1. 减少体积：压缩
	1. 服务端做gzip压缩
2. 减少访问次数
	1. 合并代码
	2. [[SSR]][^1] 
	3. 缓存：文件命名使用：根据内容生成的hash

## 资源文件
图片
	1. 各种格式的应用场景、使用方式
	2. 懒加载

1. 是否需要图片 [[Pasted image 20230714160724.png]] 
2. 对不同的场景，选择不同格式的图片
	1. JPEG [[JPEG.png]] 
	2. PNG [[PNG.png]] 
	3. GIF [[GIF.png]]  
	4. Webp [[webp.png]] 
3. 如何压缩、优化
	1. PNG [[Pasted image 20230714155546.png]] 
	2. JPEG [[Pasted image 20230714155655.png]] 
	3. GIF [[Pasted image 20230714155740.png]] 
4. 让图片尺寸随网络环境变化[^3] 
5. 响应式图片。
	1. 实现方式
		1. JS绑定事件检测窗口大小
		2. 使用CSS媒体查询 [[Pasted image 20230714160226.png]] 
		3. img标签，H5的srcset属性 [[Pasted image 20230714160245.png]] 。如果设置的像素比是3倍，可选960的图片
6. 逐步加载图像 [[Pasted image 20230714160417.png]] 
7. 图片服务器自动优化解密 [[Pasted image 20230714161927.png]] 
	1. 在图片的URL上增加参数，服务器自动生成不同格式、大小、质量的图片
## [[HTML]] 
1. 精简代码
	1. 减少HTML嵌套
	2. 减少DOM节点数
	3. 减少无语义代码。如（使用CSS代替\<div> class="clear">\</div>清除浮动）
	4. 删除HTTP或HTTPS。如果资源的协议与当前页面的协议一致。
	5. 删除多余的空格、换行符、缩进、不必要的注释
	6. 省略冗余的标签、属性
	7. 如果资源是同域，可仅使用相对路径的URL
2. 文件位置
	1. CSS样式文件链接放在页面头部
		1. 加载不会阻塞DOM tree解析，但会阻塞它渲染、后续JS执行。
		2. 减少浏览器重排文档的次数
	2. JS放在HTML底部
		1. 防止JS的加载、解析、执行阻塞页面后续元素的渲染。
3. 用户体验
	1. 设置favicon.ico
		1. 不设置，控制台会报错
		2. 页面加载时没有输入图标loading过程，不利于网站品牌。
	2. 增加首屏必要的CSS与JS
		1. 一些SPA，首屏内容很少，是空白。在弱网情况下可能是空白。
## [[JS]] 
## [[CSS]] 
## 源码

### 框架
[[React性能优化]] 
[[vue性能优化]] 
# 页面渲染架构设计及方案选型
[[前后端分离]] 
[[SPA]] 
PWA
页面加载策略
接口服务调优
接口缓存策略
前端[[组件化]] 、[[模块化]] 以加速业务开发 
# 原生APP优化方案
浏览器的整体优化方案
	导航条、滚动条
webView的缓存策略与优化
H 5静态资源请求代理
H 5离线化技术
混合式开发解决方案
# 服务端与网络优化
[[CDN]] 与DNS优化
如何减少HTTP请求数
减小cookie大小
[[Nginx]] 缓存配置与优化
开启与配置gzip压缩
开启HTTPS
升级HTTP 2.0

# 开发流程优化
技术调研的方法
前后端接口约定
加快前后端接口联调
自动化测试、部署上线

# 全链路质量监控体系建设
目的：对性能优化的结果进行衡量、评估
上线前：H 5质量及时检测
上线后：H 5性能与错误监控、线上页面可用性监控、原生APP的性能与错误监控


# 构建
# 网络
[[CDN]] 

# 渲染
1. [[CSS]]放在head，[[JS]]放在body底部
2. 尽量开始执行JS，用DOMContentLoaded触发
3. [[SSR]] 
4. [[懒加载]] 
5. DOM操作[^2] 
	1. 缓存DOM查询![[Pasted image 20230704124330.png]]
	2. 频繁DOM操作，合并到一起再插入![[Pasted image 20230704124525.png]]

# 体验
[[工具函数]] 

[^1]: 将资源一次性显示
[^2]: JS计算的速度比DOM查询的速度快很多。
[^3]: 通过在图片URL后添加不同参数，在不同网络环境（WIFI/5G/4G/3G）下，加载不同尺寸和像素的图片