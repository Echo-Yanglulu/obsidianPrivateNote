[[组件化]] 

# 生命周期
![[Pasted image 20230530125123.png]] 
旧有生命周期
![[Pasted image 20230530125007.png]] 
新生命周期

为何要换生命周期函数？
	1. 旧有生命周期函数的部分被滥用
	2. 适配fiber协调中对更新前的处理

## 挂载阶段
1. construstor
	1. 作用
		1. 初始化state
		2. 为事件处理函数绑定实例
	2. 禁止
		1. 调用setState()
		2. 添加副作用/订阅
2. getDefivedStateFromProps
	1. 返回一个新state 或null（代表不更新）
3. render
	1. 渲染UI的纯函数
	2. 此时
		1. 数据存在，视图没有
	3. 为何此时禁止操作DOM。因为DOM还不存在，获取不到？
4. componentDidMount：挂载成功【DOM已存在，且数据已更新到DOM中】
	1. 操作
		1. 请求，修改数据
			1. 触发一个额外渲染
		2. 操作DOM
		3. 计时器、订阅
## 更新阶段
进入条件
	1. props或state改变
	2. 调用forceUpdate
内部执行
	1. getDefivedStateFromProps：派生state
	2. shouldComponentUpdate()：组件是否进行更新
	3. render：组件渲染模板
	4. getSnapshotBeforeUpdate()：返回一个DOM更新之前的快照
	5. componentDidUpdate(prevProps, prevState, snapshot)：更新后
## 卸载阶段

# 返回
1. react元素
2. 数组/fragments：多个元素
3. portals：渲染子节点到不同DOM子树中
4. String/Number：在DOM中被渲染为文本节点
5. Boolean/null：不渲染。