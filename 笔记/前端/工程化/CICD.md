# 整体流程

# 持续集成
软件工程中的一种实践：高频[^1]，自动化[^2]地把所有开发者的代码==合并==到一个共享主线[^3]。CI服务器对该共享主线的代码进行构建，测试，生成测试结果。(人合并代码，机器构建)

## 实现方式
## CI的实现
CI重在==个人对团队==的交付。
### 保证协作质量
1. 代码风格检查
2. [[版本规范]]
3. [[git分支规范]]
4. 自动化单元测试、端到端测试
5. ...
除了必须人工干预的，其他都应尽量自动化。（如用git commit hook进行以上检查）
### 保证失败可追溯
1. 测试结果通知
2. [[版本规范|changelog]] 
3. [[Code Review|CR机制]] 
4. ...
### 非专业CI工具
#### GITHUB
利用github的==[[actions]]==能力，进行自动化地构建，测试，打包，发布等工作。（构建不就是打包？）

### CI平台
定义：非github或gitlab这些具有CI功能的代码版本管理方案，而是专用做CI的平台。
原因：由各种原因不想使用github, gitlab上的CI能力，用使用专业的CI平台。
实例：
	1. 阿里的Aone
	2. 网易Overmind 
	3. 开源的[[Jenkins]]

# 持续交付（continuous delivery）
软件工程中的一种方法：团队在很**短周期**内生产软件，确保**可手动**，**随时**、**可靠**地==发布==软件版本。将持续集成后得到的代码==部署==到更贴近真实运行环境的==类生产环境==中。（CI构建后的代码合并到类生产环境）
![[Pasted image 20220807111323.png]]
要点
	1. 尽快交给QA人员
	2. 在**类生产环境**中测试
	3. 保证有一个“**随时**可发布”的版本
	4. 部署到**真实生产环境**的动作是**可手动**的
优点
	1. 每个小功能都可以随时上线
# 持续部署（continuous deployment）
软件工程中的一种方法：通过**自动部署**行为，快速频繁地**交付**软件。在持续交付的基础上，自动化地把软件部署在==真实生产环境==。（持续交付基础上，把软件部署到真实生产环境）
优点
	1. 可尽快地把需求交付给用户

## 意义与价值
1. 与[[TDD]] 一样，都是敏捷开发思想的体现
2. 频繁，自动化，可重复。流程是管道，代码是水流。
3. 快速失败，尽早暴露问题解决问题[^4]。
4. 不能保证bug free，通过提高发布频率，降低单次发布风险
5. 快速交付用户价值，拥抱市场变化。


## CD的实现
是对==QA与最终用户==的交付

## 持续交付
- 多种级别的测试环境（每一轮测试环境都更接近真实生产环境）
- QA团队对功能测试的快速响应
- 自动化测试覆盖率的检查（如果不适合标准，可能这次自动化测试是不全面的）
- 发布流程的标准化
- ...

## 持续部署（要实现完善的CDeployment需要）
- 完善的项目迭代机制[^5]
- 渐进式的发布策略
- 线上监控告警[^6]
- 快速回滚能力[^7]
- ...


# [[前后端分离]]
前后端分离的多种方式（不分离，Nginx反向代理静态资源，服务器渲染与CDN，Node BFF，SSR/Serverless/GraphQL）以及分离模式下各自的发布策略
# [[多环境发布]]

# 工具
容器方案
[[Docker]]/[[kubernetes]]（云时代最火热的新型基础设施）

# 总结
“集成”是代码自动构建，“交付”是发布到类生产环境，“部署”是发布到真实生产环境。

[^1]: 高频，每次少量，能保证不会因为巨大变更引入严重问题
[^2]: 保证高频
[^3]: 不一定是master分支，而是一个共享分支
[^4]: 开发一天后发现质量问题，比开发进行一个月的时候发现好
[^5]: 不能发布半成品
[^6]: 及时发现新版本的问题
[^7]: 发现问题时能快速恢复原有版本。