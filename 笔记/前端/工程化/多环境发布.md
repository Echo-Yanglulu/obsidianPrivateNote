# 环境
## 设置
一个合理的研发流程应该包含哪些环境？
1. dev 开发联调环境
	1. 开发人员自己的
2. test 测试环境
	1. 给测试人员使用
	2. 每次部署都应有测试人员的同意
3. pre 预发环境
	1. 数据应是真实的，应用使用线上的数据库，使用真实的线上账号进行。
	2. 避免测试环境数据不真实导致的数据bug
4. prod 生产环境
## 隔离与切换
如何隔离各个环境？
1. ==域名==隔离
	1. product-a.corp.com
		1. dev环境: product-a.dev.corp.com 或 product-a-dev.corp.com
		2. test环境：product-a.test.corp.com
	2. 特点
		1. 通过切换域名来切换环境
		2. 服务之间的转跳，需要严格遵守域名约定
		3. 非生产环境与生产环境域名不同，可能需要特殊处理。
			1. 比如cookie所属的域，需要区分环境
2. ==host==隔离[^1]
	1. host文件内容设置为![[Pasted image 20220825232212.png]]
	2. 可整体切换服务的环境。
		1. switchHosts
		2. Proxy SwitchyOmega
	3. 特点
		1. 通过切换域名对应的host,切换环境
		2. 维护多份host映射需要成本（时刻维护、每个开发都需一致）
		3. 不同环境同域名可能造成账号互踢，cookie异常等问题。
## 多环境配置

[^1]: 每台电脑都有个host文件，用于配置一些域名到IP的映射。