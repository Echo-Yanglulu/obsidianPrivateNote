/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');

var IndexItemStyle;
(function (IndexItemStyle) {
    IndexItemStyle["List"] = "list";
    IndexItemStyle["Checkbox"] = "checkbox";
    IndexItemStyle["PureLink"] = "pureLink";
})(IndexItemStyle || (IndexItemStyle = {}));

const DEFAULT_SETTINGS = {
    indexPrefix: '_Index_of_',
    indexItemStyle: IndexItemStyle.PureLink,
    indexTagValue: 'MOC',
    indexTagBoolean: true,
    cleanPathBoolean: true,
};
class ZoottelkeeperPlugin extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.triggerUpdateIndexFile = obsidian.debounce(this.keepTheZooClean.bind(this), 3000, true);
        this.updateIndexContent = async (changedFile) => {
            await this.generateIndexContents(changedFile);
        };
        this.generateIndexContents = async (indexFile) => {
            let indexTFile = this.app.vault.getAbstractFileByPath(indexFile) ||
                (await this.app.vault.create(indexFile, ''));
            if (indexTFile && indexTFile instanceof obsidian.TFile)
                return this.generateIndexContent(indexTFile);
        };
        this.generateGeneralIndexContent = (options) => {
            return options.items
                .reduce((acc, curr) => {
                acc.push(options.func(curr.path));
                return acc;
            }, options.initValue);
        };
        this.generateIndexContent = async (indexTFile) => {
            let indexContent;
            // get subFolders
            //const subFolders = indexTFile.parent.children.filter(item => !this.isFile(item));
            //const files = indexTFile.parent.children.filter(item => this.isFile(item));
            const splitItems = indexTFile.parent.children.reduce((acc, curr) => {
                if (this.isFile(curr))
                    acc['files'].push(curr);
                else
                    acc['subFolders'].push(curr);
                return acc;
            }, { subFolders: [], files: [] });
            indexContent = this.generateGeneralIndexContent({
                items: splitItems.subFolders,
                func: this.generateIndexFolderItem,
                initValue: [],
            });
            indexContent = this.generateGeneralIndexContent({
                items: splitItems.files.filter(file => file.name !== indexTFile.name),
                func: this.generateIndexItem,
                initValue: indexContent,
            });
            /*indexContent = subFolders
                .reduce(
                    (acc, curr) =>Â {
                        acc.push(this.generateIndexFolderItem(curr.path));
                        return acc;
                    }, []);
    
            indexContent = files
                .filter(file => file.name !== indexTFile.name )
                .reduce(
                    (acc, curr) => {
                        acc.push(this.generateIndexItem(curr.path))
                        return acc;
                    }, indexContent);
            */
            try {
                if (indexTFile instanceof obsidian.TFile) {
                    if (this.settings.indexTagBoolean === true) {
                        const tag = this.settings.indexTagValue;
                        // if one or multiple index-tags are set, they are inserted at the beginning of the index-array
                        indexContent.unshift(`---\ntags: [${tag}]\n---\n`);
                    }
                    await this.app.vault.modify(indexTFile, indexContent.join('\n'));
                }
                else {
                    throw new Error('Creation index as folder is not supported');
                }
            }
            catch (e) {
                console.warn('Error during deletion/creation of index files');
            }
        };
        this.generateFormattedIndexItem = (path) => {
            switch (this.settings.indexItemStyle) {
                case IndexItemStyle.PureLink:
                    return `[[${path}]]`;
                case IndexItemStyle.List:
                    return `- [[${path}]]`;
                case IndexItemStyle.Checkbox:
                    return `- [ ] [[${path}]]`;
            }
        };
        this.generateIndexItem = (path) => {
            let internalFormattedIndex;
            if (this.settings.cleanPathBoolean) {
                const cleanPath = (path.endsWith(".md"))
                    ? path.replace(/\.md$/, '')
                    : path;
                const fileName = cleanPath.split("/").pop();
                internalFormattedIndex = `${cleanPath}|${fileName}`;
            }
            else {
                internalFormattedIndex = path;
            }
            return this.generateFormattedIndexItem(internalFormattedIndex);
        };
        this.generateIndexFolderItem = (path) => {
            return this.generateIndexItem(this.getInnerIndexFilePath(path));
        };
        this.getInnerIndexFilePath = (folderPath) => {
            const folderName = this.getFolderName(folderPath);
            return `${folderPath}/${this.settings.indexPrefix}${folderName}.md`;
        };
        this.getIndexFilePath = (filePath) => {
            const fileAbstrPath = this.app.vault.getAbstractFileByPath(filePath);
            if (this.isIndexFile(fileAbstrPath))
                return null;
            let parentPath = this.getParentFolder(filePath);
            // if its parent does not exits, then its a moved subfolder, so it should not be updated
            const parentTFolder = this.app.vault.getAbstractFileByPath(parentPath);
            if (parentPath && parentPath !== '') {
                if (!parentTFolder)
                    return undefined;
                parentPath = `${parentPath}/`;
            }
            const parentName = this.getParentFolderName(filePath);
            return `${parentPath}${this.settings.indexPrefix}${parentName}.md`;
        };
        this.getParentFolder = (filePath) => {
            const fileFolderArray = filePath.split('/');
            fileFolderArray.pop();
            return fileFolderArray.join('/');
        };
        this.getParentFolderName = (filePath) => {
            const parentFolder = this.getParentFolder(filePath);
            const fileFolderArray = parentFolder.split('/');
            return fileFolderArray[0] !== ''
                ? fileFolderArray[fileFolderArray.length - 1]
                : this.app.vault.getName();
        };
        this.getFolderName = (folderPath) => {
            const folderArray = folderPath.split('/');
            return (folderArray[0] !== '') ? folderArray[folderArray.length - 1] : this.app.vault.getName();
        };
        this.isIndexFile = (item) => {
            return this.isFile(item)
                && (this.settings.indexPrefix === ''
                    ? item.name === item.parent.name
                    : item.name.startsWith(this.settings.indexPrefix));
        };
        this.isFile = (item) => {
            return item instanceof obsidian.TFile;
        };
    }
    async onload() {
        await this.loadSettings();
        this.app.workspace.onLayoutReady(async () => {
            this.loadVault();
            console.debug(`Vault in files: ${JSON.stringify(this.app.vault.getMarkdownFiles().map((f) => f.path))}`);
        });
        this.registerEvent(this.app.vault.on('create', this.triggerUpdateIndexFile));
        this.registerEvent(this.app.vault.on('delete', this.triggerUpdateIndexFile));
        this.registerEvent(this.app.vault.on('rename', this.triggerUpdateIndexFile));
        this.addSettingTab(new ZoottelkeeperPluginSettingTab(this.app, this));
    }
    loadVault() {
        this.lastVault = new Set(this.app.vault.getMarkdownFiles().map((file) => file.path));
    }
    async keepTheZooClean() {
        console.debug('keeping the zoo clean...');
        if (this.lastVault) {
            const vaultFilePathsSet = new Set(this.app.vault.getMarkdownFiles().map((file) => file.path));
            try {
                // getting the changed files using symmetric diff
                let changedFiles = new Set([
                    ...Array.from(vaultFilePathsSet).filter((currentFile) => !this.lastVault.has(currentFile)),
                    ...Array.from(this.lastVault).filter((currentVaultFile) => !vaultFilePathsSet.has(currentVaultFile)),
                ]);
                console.debug(`changedFiles: ${JSON.stringify(Array.from(changedFiles))}`);
                // getting index files to be updated
                const indexFiles2BUpdated = new Set();
                for (const changedFile of Array.from(changedFiles)) {
                    const indexFilePath = this.getIndexFilePath(changedFile);
                    if (indexFilePath)
                        indexFiles2BUpdated.add(indexFilePath);
                    // getting the parents' index notes of each changed file in order to update their links as well (hierarhical backlinks)
                    const parentIndexFilePath = this.getIndexFilePath(this.getParentFolder(changedFile));
                    if (parentIndexFilePath)
                        indexFiles2BUpdated.add(parentIndexFilePath);
                }
                console.debug(`Index files to be updated: ${JSON.stringify(Array.from(indexFiles2BUpdated))}`);
                // update index files
                for (const indexFile of Array.from(indexFiles2BUpdated)) {
                    await this.updateIndexContent(indexFile);
                }
            }
            catch (e) { }
        }
        this.lastVault = new Set(this.app.vault.getMarkdownFiles().map((file) => file.path));
    }
    onunload() {
        console.debug('unloading plugin');
    }
    async loadSettings() {
        this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    }
    async saveSettings() {
        await this.saveData(this.settings);
    }
}
class ZoottelkeeperPluginSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Zoottelkeeper Settings' });
        containerEl.createEl('h3', { text: 'General Settings' });
        new obsidian.Setting(containerEl)
            .setName("Clean Files")
            .setDesc("This enables you to only show the files without path and '.md' ending in preview mode.")
            .addToggle((t) => {
            t.setValue(this.plugin.settings.cleanPathBoolean);
            t.onChange(async (v) => {
                this.plugin.settings.cleanPathBoolean = v;
                await this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('List Style')
            .setDesc('Select the style of the index-list.')
            .addDropdown(async (dropdown) => {
            dropdown.addOption(IndexItemStyle.PureLink, 'Pure Obsidian link');
            dropdown.addOption(IndexItemStyle.List, 'Listed link');
            dropdown.addOption(IndexItemStyle.Checkbox, 'Checkboxed link');
            dropdown.setValue(this.plugin.settings.indexItemStyle);
            dropdown.onChange(async (option) => {
                console.debug('Chosen index item style: ' + option);
                this.plugin.settings.indexItemStyle = option;
                await this.plugin.saveSettings();
            });
        });
        // index prefix
        new obsidian.Setting(containerEl)
            .setName('Index Prefix')
            .setDesc('Per default the file is named after your folder, but you can prefix it here.')
            .addText((text) => text
            .setPlaceholder('')
            .setValue(this.plugin.settings.indexPrefix)
            .onChange(async (value) => {
            console.debug('Index prefix: ' + value);
            this.plugin.settings.indexPrefix = value;
            await this.plugin.saveSettings();
        }));
        containerEl.createEl('h4', { text: 'Meta Tags' });
        // Enabling Meta Tags
        new obsidian.Setting(containerEl)
            .setName('Enable Meta Tags')
            .setDesc("You can add Meta Tags at the top of your index-file. This is useful when you're using the index files as MOCs.")
            .addToggle((t) => {
            t.setValue(this.plugin.settings.indexTagBoolean);
            t.onChange(async (v) => {
                this.plugin.settings.indexTagBoolean = v;
                await this.plugin.saveSettings();
            });
        });
        // setting the meta tag value
        new obsidian.Setting(containerEl)
            .setName('Set Meta Tags')
            .setDesc('You can add one or multiple tags to your index-files! There is no need to use "#", just use commas between tags.')
            .addText((text) => text
            .setPlaceholder('moc')
            .setValue(this.plugin.settings.indexTagValue)
            .onChange(async (value) => {
            this.plugin.settings.indexTagValue = value;
            await this.plugin.saveSettings();
        }));
    }
}

module.exports = ZoottelkeeperPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiSW5kZXhJdGVtU3R5bGUudHMiLCJtYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpudWxsLCJuYW1lcyI6WyJQbHVnaW4iLCJkZWJvdW5jZSIsIlRGaWxlIiwiUGx1Z2luU2V0dGluZ1RhYiIsIlNldHRpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBLElBQVksY0FJWDtBQUpELFdBQVksY0FBYztJQUN6QiwrQkFBYSxDQUFBO0lBQ2IsdUNBQXFCLENBQUE7SUFDckIsdUNBQW1CLENBQUE7QUFDcEIsQ0FBQyxFQUpXLGNBQWMsS0FBZCxjQUFjOztBQ2dCMUIsTUFBTSxnQkFBZ0IsR0FBZ0M7SUFDckQsV0FBVyxFQUFFLFlBQVk7SUFDekIsY0FBYyxFQUFFLGNBQWMsQ0FBQyxRQUFRO0lBQ3ZDLGFBQWEsRUFBRSxLQUFLO0lBQ3BCLGVBQWUsRUFBRSxJQUFJO0lBQ3JCLGdCQUFnQixFQUFFLElBQUk7Q0FDdEIsQ0FBQztNQUVtQixtQkFBb0IsU0FBUUEsZUFBTTtJQUF2RDs7UUFJQywyQkFBc0IsR0FBR0MsaUJBQVEsQ0FDaEMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQy9CLElBQUksRUFDSixJQUFJLENBQ0osQ0FBQztRQTJGRix1QkFBa0IsR0FBRyxPQUFPLFdBQW1CO1lBQzlDLE1BQU0sSUFBSSxDQUFDLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1NBQzlDLENBQUM7UUFFRiwwQkFBcUIsR0FBRyxPQUFPLFNBQWlCO1lBQy9DLElBQUksVUFBVSxHQUNiLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLHFCQUFxQixDQUFDLFNBQVMsQ0FBQztpQkFDOUMsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFOUMsSUFBSSxVQUFVLElBQUksVUFBVSxZQUFZQyxjQUFLO2dCQUM1QyxPQUFP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
