'use strict';

var obsidian = require('obsidian');

const MAX_TIME_SINCE_CREATION = 5000; // 5 seconds

class RolloverTodosPlugin extends obsidian.Plugin {
	checkDailyNotesEnabled() {
        const plugin = this.app.internalPlugins.plugins['daily-notes'];
        return plugin && plugin.enabled;
	}

	getDailyNotesDirectory() {
		if (this.dailyNotesDirectory != null) {
			return this.dailyNotesDirectory;
		}

		this.dailyNotesDirectory = this.app.internalPlugins.plugins['daily-notes'].instance.options.folder;
		return this.dailyNotesDirectory;
	}

	getLastDailyNote() {
		const dailyNotesDirectory = this.getDailyNotesDirectory();
		
		const files = this.app.vault.getAllLoadedFiles()
			.filter(file => file.path.startsWith(dailyNotesDirectory))
			.filter(file => file.basename != null)
			.sort((a, b) => new Date(b.basename).getTime() - new Date(a.basename).getTime());

		return files[1];
	}

	async getAllUnfinishedTodos(file) {
		const contents = await this.app.vault.read(file);
		const unfinishedTodosRegex = /\t*- \[ \].*/g;
		const unfinishedTodos = Array.from(contents.matchAll(unfinishedTodosRegex)).map(([todo]) => todo);
		return unfinishedTodos;
	}

	async onload() {
		this.settings = await this.loadData() || { templateHeading: 'none' };

		if (!this.checkDailyNotesEnabled()) {
			new obsidian.Notice('Daily notes plugin is not enabled. Enable it and then reload Obsidian.', 2000);
		}

		this.addSettingTab(new RollverTodosSettings(this.app, this));

		this.registerEvent(this.app.vault.on('create', async (file) => {
			// is a daily note
			const dailyNotesDirectory = this.getDailyNotesDirectory();
			if (!file.path.startsWith(dailyNotesDirectory)) return;

			// is today's daily note
			const today = new Date();
			if (getISOFormattedDate(today) !== file.basename) return;

			// was just created
			if (today.getTime() - file.stat.ctime > MAX_TIME_SINCE_CREATION) return;

			const lastDailyNote = this.getLastDailyNote();
			if (lastDailyNote == null) return;

			const unfinishedTodos = await this.getAllUnfinishedTodos(lastDailyNote);
			
			let dailyNoteContent = await this.app.vault.read(file);

			if (this.settings.templateHeading !== 'none') {
				const heading = this.settings.templateHeading;
				dailyNoteContent = dailyNoteContent.replace(heading, heading + '\n' + unfinishedTodos.join('\n') + '\n');
			} else {
				dailyNoteContent += '\n' + unfinishedTodos.join('\n');
			}

			await this.app.vault.modify(file, dailyNoteContent);
		}));
	}
}

class RollverTodosSettings extends obsidian.PluginSettingTab {
	constructor(app, plugin) {
		super(app, plugin);
		this.plugin = plugin;
	}

	async getTemplateHeadings() {
		const template = this.app.internalPlugins.plugins['daily-notes'].instance.options.template;
		if (!template) return [];
		
		const file = this.app.vault.getAbstractFileByPath(template + '.md');
		const templateContents = await this.app.vault.read(file);
		const allHeadings = Array.from(templateContents.matchAll(/#{1,} .*/g)).map(([heading]) => heading);
		return allHeadings;
	}

	async display() {
		const templateHeadings = await this.getTemplateHeadings();

		this.containerEl.empty();
		new obsidian.Setting(this.containerEl)
			.setName('Template heading')
			.setDesc('Which heading from your template should the todos go under')
			.addDropdown((dropdown) => dropdown
				.addOptions({
					...templateHeadings.reduce((acc, heading) => {
						acc[heading] = heading;
						return acc;
					}, {}),
					'none': 'None' 
				})
				.setValue(this.plugin?.settings.templateHeading)
				.onChange(value => {
					this.plugin.settings.templateHeading = value;
					this.plugin.saveData(this.plugin.settings);
				})
			);
		}
}

/**
 * Return an ISO formatted date only for the users current timezone.
 */
function getISOFormattedDate(date) {
	const month = `${date.getMonth() + 1}`.padStart(2, "0");
	const day = `${date.getDate()}`.padStart(2, "0");
	return date.getFullYear() + "-" + month + "-" + day;
}

module.exports = RolloverTodosPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTm90aWNlLCBQbHVnaW4sIFNldHRpbmcsIFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5jb25zdCBNQVhfVElNRV9TSU5DRV9DUkVBVElPTiA9IDUwMDA7IC8vIDUgc2Vjb25kc1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9sbG92ZXJUb2Rvc1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0Y2hlY2tEYWlseU5vdGVzRW5hYmxlZCgpIHtcclxuICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1snZGFpbHktbm90ZXMnXTtcclxuICAgICAgICByZXR1cm4gcGx1Z2luICYmIHBsdWdpbi5lbmFibGVkO1xyXG5cdH1cclxuXHJcblx0Z2V0RGFpbHlOb3Rlc0RpcmVjdG9yeSgpIHtcclxuXHRcdGlmICh0aGlzLmRhaWx5Tm90ZXNEaXJlY3RvcnkgIT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5kYWlseU5vdGVzRGlyZWN0b3J5O1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZGFpbHlOb3Rlc0RpcmVjdG9yeSA9IHRoaXMuYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zWydkYWlseS1ub3RlcyddLmluc3RhbmNlLm9wdGlvbnMuZm9sZGVyO1xyXG5cdFx0cmV0dXJuIHRoaXMuZGFpbHlOb3Rlc0RpcmVjdG9yeTtcclxuXHR9XHJcblxyXG5cdGdldExhc3REYWlseU5vdGUoKSB7XHJcblx0XHRjb25zdCBkYWlseU5vdGVzRGlyZWN0b3J5ID0gdGhpcy5nZXREYWlseU5vdGVzRGlyZWN0b3J5KCk7XHJcblx0XHRcclxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxyXG5cdFx0XHQuZmlsdGVyKGZpbGUgPT4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZGFpbHlOb3Rlc0RpcmVjdG9yeSkpXHJcblx0XHRcdC5maWx0ZXIoZmlsZSA9PiBmaWxlLmJhc2VuYW1lICE9IG51bGwpXHJcblx0XHRcdC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmJhc2VuYW1lKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmJhc2VuYW1lKS5nZXRUaW1lKCkpO1xyXG5cclxuXHRcdHJldHVybiBmaWxlc1sxXTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGdldEFsbFVuZmluaXNoZWRUb2RvcyhmaWxlKSB7XHJcblx0XHRjb25zdCBjb250ZW50cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcblx0XHRjb25zdCB1bmZpbmlzaGVkVG9kb3NSZWdleCA9IC9cXHQqLSBcXFsgXFxdLiovZ1xyXG5cdFx0Y29uc3QgdW5maW5pc2hlZFRvZG9zID0gQXJyYXkuZnJvbShjb250ZW50cy5tYXRjaEFsbCh1bmZpbmlzaGVkVG9kb3NSZWdleCkpLm1hcCgoW3RvZG9dKSA9PiB0b2RvKVxyXG5cdFx0cmV0dXJuIHVuZmluaXNoZWRUb2RvcztcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCkgfHwgeyB0ZW1wbGF0ZUhlYWRpbmc6ICdub25lJyB9O1xyXG5cclxuXHRcdGlmICghdGhpcy5jaGVja0RhaWx5Tm90ZXNFbmFibGVkKCkpIHtcclxuXHRcdFx0bmV3IE5vdGljZSgnRGFpbHkgbm90ZXMgcGx1Z2luIGlzIG5vdCBlbmFibGVkLiBFbmFibGUgaXQgYW5kIHRoZW4gcmVsb2FkIE9ic2lkaWFuLicsIDIwMDApXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBSb2xsdmVyVG9kb3NTZXR0aW5ncyh0aGlzLmFwcCwgdGhpcykpXHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLCBhc3luYyAoZmlsZSkgPT4ge1xyXG5cdFx0XHQvLyBpcyBhIGRhaWx5IG5vdGVcclxuXHRcdFx0Y29uc3QgZGFpbHlOb3Rlc0RpcmVjdG9yeSA9IHRoaXMuZ2V0RGFpbHlOb3Rlc0RpcmVjdG9yeSgpXHJcblx0XHRcdGlmICghZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZGFpbHlOb3Rlc0RpcmVjdG9yeSkpIHJldHVybjtcclxuXHJcblx0XHRcdC8vIGlzIHRvZGF5J3MgZGFpbHkgbm90ZVxyXG5cdFx0XHRjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcblx0XHRcdGlmIChnZXRJU09Gb3JtYXR0ZWREYXRlKHRvZGF5KSAhPT0gZmlsZS5iYXNlbmFtZSkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Ly8gd2FzIGp1c3QgY3JlYXRlZFxyXG5cdFx0XHRpZiAodG9kYXkuZ2V0VGltZSgpIC0gZmlsZS5zdGF0LmN0aW1lID4gTUFYX1RJTUVfU0lOQ0VfQ1JFQVRJT04pIHJldHVybjtcclxuXHJcblx0XHRcdGNvbnN0IGxhc3REYWlseU5vdGUgPSB0aGlzLmdldExhc3REYWlseU5vdGUoKTtcclxuXHRcdFx0aWYgKGxhc3REYWlseU5vdGUgPT0gbnVsbCkgcmV0dXJuO1xyXG5cclxuXHRcdFx0Y29uc3QgdW5maW5pc2hlZFRvZG9zID0gYXdhaXQgdGhpcy5nZXRBbGxVbmZpbmlzaGVkVG9kb3MobGFzdERhaWx5Tm90ZSlcclxuXHRcdFx0XHJcblx0XHRcdGxldCBkYWlseU5vdGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKVxyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudGVtcGxhdGVIZWFkaW5nICE9PSAnbm9uZScpIHtcclxuXHRcdFx0XHRjb25zdCBoZWFkaW5nID0gdGhpcy5zZXR0aW5ncy50ZW1wbGF0ZUhlYWRpbmc7XHJcblx0XHRcdFx0ZGFpbHlOb3RlQ29udGVudCA9IGRhaWx5Tm90ZUNvbnRlbnQucmVwbGFjZShoZWFkaW5nLCBoZWFkaW5nICsgJ1xcbicgKyB1bmZpbmlzaGVkVG9kb3Muam9pbignXFxuJykgKyAnXFxuJylcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRkYWlseU5vdGVDb250ZW50ICs9ICdcXG4nICsgdW5maW5pc2hlZFRvZG9zLmpvaW4oJ1xcbicpXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBkYWlseU5vdGVDb250ZW50KTtcclxuXHRcdH0pKVxyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgUm9sbHZlclRvZG9zU2V0dGluZ3MgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRjb25zdHJ1Y3RvcihhcHAsIHBsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pXHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpblxyXG5cdH1cclxuXHJcblx0YXN5bmMgZ2V0VGVtcGxhdGVIZWFkaW5ncygpIHtcclxuXHRcdGNvbnN0IHRlbXBsYXRlID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnNbJ2RhaWx5LW5vdGVzJ10uaW5zdGFuY2Uub3B0aW9ucy50ZW1wbGF0ZTtcclxuXHRcdGlmICghdGVtcGxhdGUpIHJldHVybiBbXTtcclxuXHRcdFxyXG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0ZW1wbGF0ZSArICcubWQnKVxyXG5cdFx0Y29uc3QgdGVtcGxhdGVDb250ZW50cyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSlcclxuXHRcdGNvbnN0IGFsbEhlYWRpbmdzID0gQXJyYXkuZnJvbSh0ZW1wbGF0ZUNvbnRlbnRzLm1hdGNoQWxsKC8jezEsfSAuKi9nKSkubWFwKChbaGVhZGluZ10pID0+IGhlYWRpbmcpXHJcblx0XHRyZXR1cm4gYWxsSGVhZGluZ3M7XHJcblx0fVxyXG5cclxuXHRhc3luYyBkaXNwbGF5KCkge1xyXG5cdFx0Y29uc3QgdGVtcGxhdGVIZWFkaW5ncyA9IGF3YWl0IHRoaXMuZ2V0VGVtcGxhdGVIZWFkaW5ncygpXHJcblxyXG5cdFx0dGhpcy5jb250YWluZXJFbC5lbXB0eSgpXHJcblx0XHRuZXcgU2V0dGluZyh0aGlzLmNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnVGVtcGxhdGUgaGVhZGluZycpXHJcblx0XHRcdC5zZXREZXNjKCdXaGljaCBoZWFkaW5nIGZyb20geW91ciB0ZW1wbGF0ZSBzaG91bGQgdGhlIHRvZG9zIGdvIHVuZGVyJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4gZHJvcGRvd25cclxuXHRcdFx0XHQuYWRkT3B0aW9ucyh7XHJcblx0XHRcdFx0XHQuLi50ZW1wbGF0ZUhlYWRpbmdzLnJlZHVjZSgoYWNjLCBoZWFkaW5nKSA9PiB7XHJcblx0XHRcdFx0XHRcdGFjY1toZWFkaW5nXSA9IGhlYWRpbmc7XHJcblx0XHRcdFx0XHRcdHJldHVybiBhY2M7XHJcblx0XHRcdFx0XHR9LCB7fSksXHJcblx0XHRcdFx0XHQnbm9uZSc6ICdOb25lJyBcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbj8uc2V0dGluZ3MudGVtcGxhdGVIZWFkaW5nKVxyXG5cdFx0XHRcdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wbGF0ZUhlYWRpbmcgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdClcclxuXHRcdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJldHVybiBhbiBJU08gZm9ybWF0dGVkIGRhdGUgb25seSBmb3IgdGhlIHVzZXJzIGN1cnJlbnQgdGltZXpvbmUuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJU09Gb3JtYXR0ZWREYXRlKGRhdGUpIHtcclxuXHRjb25zdCBtb250aCA9IGAke2RhdGUuZ2V0TW9udGgoKSArIDF9YC5wYWRTdGFydCgyLCBcIjBcIilcclxuXHRjb25zdCBkYXkgPSBgJHtkYXRlLmdldERhdGUoKX1gLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuXHRyZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpICsgXCItXCIgKyBtb250aCArIFwiLVwiICsgZGF5O1xyXG59XHJcbiJdLCJuYW1lcyI6WyJQbHVnaW4iLCJOb3RpY2UiLCJQbHVnaW5TZXR0aW5nVGFiIiwiU2V0dGluZyJdLCJtYXBwaW5ncyI6Ijs7OztBQUVBLE1BQU0sdUJBQXVCLEdBQUcsSUFBSSxDQUFDO0FBQ3JDO0FBQ2UsTUFBTSxtQkFBbUIsU0FBU0EsZUFBTSxDQUFDO0FBQ3hELENBQUMsc0JBQXNCLEdBQUc7QUFDMUIsUUFBUSxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDdkUsUUFBUSxPQUFPLE1BQU0sSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ3hDLEVBQUU7QUFDRjtBQUNBLENBQUMsc0JBQXNCLEdBQUc7QUFDMUIsRUFBRSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQUU7QUFDeEMsR0FBRyxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztBQUNuQyxHQUFHO0FBQ0g7QUFDQSxFQUFFLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDckcsRUFBRSxPQUFPLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztBQUNsQyxFQUFFO0FBQ0Y7QUFDQSxDQUFDLGdCQUFnQixHQUFHO0FBQ3BCLEVBQUUsTUFBTSxtQkFBbUIsR0FBRyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsQ0FBQztBQUM1RDtBQUNBLEVBQUUsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsaUJBQWlC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
