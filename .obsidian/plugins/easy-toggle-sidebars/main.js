/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  default: () => EasytoggleSidebar2
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var ETSSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "Easy Toggle Sidebar" });
    const content = `<br>With RightMouseButton or MiddleMouseButton :<br>
		<ul>
            <li>double click to toggle both sidebars </li>
			<li>click and move toward the sideBar you want to toggle</li>
            <li>you can do previous operations from the ribbon bar using double clic and vertical moves (up/down). this is useful when in canvas</li>
            <li>autoHide to automatically hide sidebars when clicking on the editor</li>
            <li>ribbon bar autoHide button switcher</li>
            <li>hide sidebars under a minimal editor WIDTH</li>
		</ul>
		Command "toggle both sidebars" added.	
        <br><br>`;
    containerEl.createDiv("", (el) => {
      el.innerHTML = content;
    });
    new import_obsidian.Setting(containerEl).setName("Right Mouse").setDesc("Activates Right Mouse to trigger operations").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.useRightMouse).onChange((value) => {
        this.plugin.settings.useRightMouse = value;
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Middle Mouse").setDesc("Activates Right Mouse to trigger operations").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.useMiddleMouse).onChange(async (value) => {
        this.plugin.settings.useMiddleMouse = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Horizontal Move threshold(px)").setDesc("the most used").addSlider((slider) => {
      slider.setLimits(50, 500, 10).setValue(this.plugin.settings.moveThresholdHor).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.moveThresholdHor = value;
        await this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("reset").setTooltip("Reset to default").onClick(async () => {
        this.plugin.settings.moveThresholdHor = DEFAULT_SETTINGS.moveThresholdHor;
        await this.plugin.saveSettings();
        this.display();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Vertical Move threshold(px)").setDesc("could be used in ribbon bar, when using canvas").addSlider((slider) => {
      slider.setLimits(50, 500, 10).setValue(this.plugin.settings.moveThresholdVert).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.moveThresholdVert = value;
        await this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("reset").setTooltip("Reset to default").onClick(async () => {
        this.plugin.settings.moveThresholdVert = DEFAULT_SETTINGS.moveThresholdVert;
        await this.plugin.saveSettings();
        this.display();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Auto hide").setDesc(
      "Auto hide panels when clicking on the editor. Add a Ribbon icon to switch autoHide"
    ).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.autoHideRibbon).onChange(async (value) => {
        var _a;
        this.plugin.settings.autoHideRibbon = value;
        if (this.plugin.settings.autoHideRibbon) {
          this.plugin.settings.autoHide = true;
          this.plugin.toggleAutoHideEvent();
          this.plugin.toggleColor();
          this.plugin.autoHideON();
        } else {
          (_a = this.plugin.ribbonIconEl) == null ? void 0 : _a.remove();
          this.plugin.ribbonIconEl = null;
          this.plugin.settings.autoHide = false;
          this.plugin.toggleAutoHideEvent();
          this.plugin.toggleColor();
        }
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Minimal editor width").setDesc(
      "Hide panel(s) if the proportion of the editor is less than X (threshold below) times the window size"
    ).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.autoMinRootWidth).onChange(async (value) => {
        this.plugin.settings.autoMinRootWidth = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Set editor min width").setDesc("min width triggering auto reduce/close sidebars").addSlider((slider) => {
      slider.setLimits(200, 800, 10).setValue(this.plugin.settings.minRootWidth).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.minRootWidth = value;
        await this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("reset").setTooltip("Reset to default").onClick(async () => {
        this.plugin.settings.minRootWidth = DEFAULT_SETTINGS.minRootWidth;
        await this.plugin.saveSettings();
        this.display();
      });
    });
    new import_obsidian.Setting(containerEl).setName("double click delay(ms)").setDesc("max delay to trigger a double click").addSlider((slider) => {
      slider.setLimits(200, 600, 10).setValue(this.plugin.settings.dblClickDelay).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.dblClickDelay = value;
        await this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("reset").setTooltip("Reset to default").onClick(async () => {
        this.plugin.settings.dblClickDelay = DEFAULT_SETTINGS.dblClickDelay;
        await this.plugin.saveSettings();
        this.display();
      });
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  useRightMouse: true,
  useMiddleMouse: true,
  moveThresholdHor: 50,
  moveThresholdVert: 50,
  autoHide: true,
  autoHideRibbon: true,
  autoMinRootWidth: true,
  minRootWidth: 300,
  dblClickDelay: 450
};
var EasytoggleSidebar2 = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.startX = 0;
    this.startY = 0;
    this.endX = 0;
    this.endY = 0;
    this.isTracking = false;
    this.distanceX = 0;
    this.distanceY = 0;
    this.movedX = false;
    this.movedY = false;
    this.doubleClickTimer = null;
    this.clicked = 0;
    this.clickTimeout = null;
    this.mousedownHandler = (evt) => {
      if (evt.button === 0)
        return;
      this.reinitialize();
      const { settings } = this;
      const RMB = settings.useRightMouse;
      const MMB = settings.useMiddleMouse;
      if (MMB && evt.button === 1 || RMB && evt.button === 2) {
        this.startX = evt.clientX;
        this.startY = evt.clientY;
        this.isTracking = true;
        this.doubleClickTimer = setTimeout(() => {
          this.doubleClickTimer = null;
          this.removeContextMenuListener();
        }, this.settings.dblClickDelay);
      }
    };
    this.mousemoveHandler = (e) => {
      if (!this.isTracking)
        return;
      const { settings } = this;
      this.endX = e.clientX;
      this.endY = e.clientY;
      this.distanceX = Math.abs(this.endX - this.startX);
      this.distanceY = Math.abs(this.endY - this.startY);
      this.movedX = this.distanceX > settings.moveThresholdHor;
      this.movedY = this.distanceY > settings.moveThresholdVert;
      if (this.movedX || this.movedY) {
        this.addContextMenuListener();
      }
    };
    this.mouseupHandler = (evt) => {
      if (!this.isTracking)
        return;
      this.isTracking = false;
      const { settings } = this;
      const RMB = settings.useRightMouse;
      const MMB = settings.useMiddleMouse;
      if ((MMB && evt.button === 1 || RMB && evt.button === 2) && evt.detail === 1) {
        if (this.distanceX > settings.moveThresholdHor && this.endX < this.startX || this.distanceY > settings.moveThresholdVert && this.endY < this.startY) {
          this.toggle(this.getLeftSplit(), 2);
        } else if (this.distanceX > settings.moveThresholdHor && this.endX > this.startX || settings.moveThresholdVert && this.endY > this.startY) {
          this.toggle(this.getRightSplit(), 2);
          this.removeContextMenuListener();
        }
      }
      if ((MMB && evt.button === 1 || RMB && evt.button === 2) && evt.detail === 2 && this.doubleClickTimer) {
        this.addContextMenuListener();
        this.toggleBothSidebars();
        this.removeContextMenuListener();
      }
    };
    this.autoHideON = () => {
      const { settings } = this;
      this.ribbonIconEl = this.addRibbonIcon(
        "move-horizontal",
        "autoHide switcher",
        async () => {
          settings.autoHide = !settings.autoHide;
          await this.saveSettings();
          this.toggleAutoHideEvent();
          this.toggleColor();
          new import_obsidian2.Notice(
            settings.autoHide ? "AutoHide Enabled" : "AutoHide Disabled",
            2e3
          );
        }
      );
      this.toggleColor();
    };
    this.toggleAutoHideEvent = () => {
      if (this.settings.autoHide) {
        this.registerDomEvent(document, "click", this.autoHide);
      } else {
        document.removeEventListener("click", this.autoHide);
      }
    };
    this.autoHide = (evt) => {
      const rootSplitEl = this.getRootSplit().containerEl;
      const clickedElement = evt.target;
      const isBody = clickedElement.classList.contains("cm-content");
      const isLine = clickedElement.classList.contains("cm-line");
      const isLink = clickedElement.classList.contains("cm-underline");
      const isRoot = rootSplitEl.contains(clickedElement);
      if (!isRoot)
        return;
      if (isLine || isBody || isLink) {
        const leftSplit = this.getLeftSplit();
        const rightSplit = this.getRightSplit();
        if (!leftSplit.collapsed || !rightSplit.collapsed) {
          this.toggleBothSidebars();
        }
      }
    };
    this.toggleRightSidebar = (evt) => {
      const clickedElement = evt.target;
      const isRibbon = clickedElement.classList.contains("workspace-ribbon");
      if (isRibbon) {
        const leftSplit = this.getLeftSplit();
        this.toggle(leftSplit, 2);
      }
    };
    this.goToExplorerTab = async (evt) => {
      const clickedElement = evt.target;
      const isLeftSplit = clickedElement.closest(".mod-left-split");
      if (isLeftSplit) {
        const activeLeftSplit = this.getActiveSidebarLeaf.bind(this)()[0];
        const isExplorerLeaf = (activeLeftSplit == null ? void 0 : activeLeftSplit.getViewState().type) === "file-explorer";
        if (isExplorerLeaf) {
          if (this.previousActiveSplitLeaf)
            this.app.workspace.revealLeaf(this.previousActiveSplitLeaf);
        } else {
          const explorerLeaf = this.app.workspace.getLeavesOfType("file-explorer")[0];
          this.app.workspace.revealLeaf(explorerLeaf);
        }
        this.previousActiveSplitLeaf = activeLeftSplit;
      }
    };
    this.togglePin = async (evt) => {
      var _a;
      console.log("ici");
      const clickedElement = evt.target;
      const isTabheader = clickedElement.closest(".workspace-tab-header-inner-title");
      console.log("clicked");
      const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian2.View)) == null ? void 0 : _a.leaf;
      const { isMainWindow, rootSplit } = this.getLeafProperties(activeLeaf);
      const condition = isMainWindow && rootSplit || !isMainWindow;
      if (activeLeaf && condition) {
        activeLeaf.togglePinned();
      }
    };
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ETSSettingTab(this.app, this));
    if (this.settings.autoHideRibbon) {
      this.autoHideON();
    }
    this.app.workspace.onLayoutReady(() => {
      this.registerDomEvent(document, "mousedown", this.mousedownHandler);
      this.registerDomEvent(document, "mousemove", this.mousemoveHandler);
      this.registerDomEvent(document, "mouseup", this.mouseupHandler);
      this.registerDomEvent(
        document,
        "dblclick",
        async (evt) => {
          this.toggleRightSidebar(evt);
        }
      );
      this.registerDomEvent(
        document.win,
        "click",
        async (evt) => {
          if (this.clickTimeout) {
            clearTimeout(this.clickTimeout);
          }
          if (!this.clicked) {
            this.clicked = 1;
          } else {
            this.clicked++;
          }
          this.clickTimeout = setTimeout(async () => {
            if (this.clicked === 3) {
              await this.goToExplorerTab.bind(this)(evt);
            } else if (this.clicked === 2) {
              await this.togglePin.bind(this)(evt);
            }
            this.clicked = 0;
          }, 400);
        }
      );
      this.addCommand({
        id: "toggle-both-sidebars",
        name: "Toggle both sidebars",
        callback: () => {
          this.toggleBothSidebars();
        }
      });
      if (this.settings.autoHide) {
        this.registerDomEvent(document, "click", this.autoHide);
      }
      this.registerEvent(
        this.app.workspace.on("resize", () => this.onResize())
      );
    });
  }
  toggleColor() {
    var _a, _b;
    this.settings.autoHide ? (_a = this.ribbonIconEl) == null ? void 0 : _a.addClass("ribbon-color") : (_b = this.ribbonIconEl) == null ? void 0 : _b.removeClass("ribbon-color");
  }
  contextmenuHandler(evt) {
    evt.preventDefault();
  }
  addContextMenuListener() {
    return window.addEventListener(
      "contextmenu",
      this.contextmenuHandler,
      true
    );
  }
  reinitialize() {
    this.startX = 0;
    this.startY = 0;
    this.endX = 0;
    this.endY = 0;
    this.isTracking = false;
    this.distanceX = 0;
    this.distanceY = 0;
    this.movedX = false;
    this.movedY = false;
  }
  removeContextMenuListener(delay = 20) {
    if (this.movedX || this.movedY || this.doubleClickTimer)
      return setTimeout(() => {
        window.removeEventListener(
          "contextmenu",
          this.contextmenuHandler,
          true
        );
        this.movedX = false;
        this.movedY = false;
        this.doubleClickTimer = null;
      }, delay);
  }
  toggleBothSidebars() {
    const isLeftOpen = this.isOpen(this.getLeftSplit());
    const isRightOpen = this.isOpen(this.getRightSplit());
    if (isLeftOpen && !isRightOpen) {
      this.toggle(this.getLeftSplit());
    } else if (isRightOpen && !isLeftOpen) {
      this.toggle(this.getRightSplit());
    } else if (isRightOpen && isLeftOpen) {
      this.toggle(this.getLeftSplit());
      this.toggle(this.getRightSplit());
    } else {
      this.toggle(this.getLeftSplit(), 1);
      this.toggle(this.getRightSplit(), 1);
    }
  }
  getLeftSplit() {
    return this.app.workspace.leftSplit;
  }
  getRightSplit() {
    return this.app.workspace.rightSplit;
  }
  getRootSplit() {
    return this.app.workspace.rootSplit;
  }
  onResize() {
    const LS = this.getLeftSplit();
    const RS = this.getRightSplit();
    const { settings } = this;
    const { minRootWidth } = settings;
    if (!settings.autoMinRootWidth || !this.isOpen(LS) && !this.isOpen(RS)) {
      return;
    }
    const editorWidth = this.getRootSplit().containerEl.clientWidth;
    if (editorWidth < minRootWidth) {
      if (LS.containerEl.clientWidth > 200) {
        LS.setSize(200);
      }
      if (RS.containerEl.clientWidth > 200) {
        RS.setSize(200);
      }
    }
    if (editorWidth < minRootWidth) {
      const updatedEditorWidth = this.getRootSplit().containerEl.clientWidth;
      if (updatedEditorWidth <= minRootWidth) {
        this.toggleBothSidebars();
      }
    }
  }
  async toggle(side, mode = 0) {
    switch (mode) {
      case 0:
        side.collapse();
        break;
      case 1:
        side.expand();
        break;
      case 2:
        if (this.isOpen(side)) {
          side.collapse();
        } else {
          side.expand();
        }
        break;
      default:
        break;
    }
  }
  isOpen(side) {
    if (side.collapsed == true)
      return false;
    else
      return true;
  }
  getLeafProperties(leaf) {
    const isMainWindow = (leaf == null ? void 0 : leaf.view.containerEl.win) === window;
    const rootSplit = (leaf == null ? void 0 : leaf.getRoot()) === this.app.workspace.rootSplit;
    return { isMainWindow, rootSplit };
  }
  getActiveSidebarLeaf() {
    const leftRoot = this.app.workspace.leftSplit.getRoot();
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf.getRoot() == leftRoot && leaf.view.containerEl.clientWidth > 0) {
        leaves.push(leaf);
      }
    });
    return leaves;
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgVmlldywgV29ya3NwYWNlTGVhZiwgV29ya3NwYWNlU2lkZWRvY2sgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgRVRTU2V0dGluZ1RhYiB9IGZyb20gXCIuL3NldHRpbmdzXCI7XHJcblxyXG5pbnRlcmZhY2UgRVRTU2V0dGluZ3Mge1xyXG5cdHVzZVJpZ2h0TW91c2U6IGJvb2xlYW47XHJcblx0dXNlTWlkZGxlTW91c2U6IGJvb2xlYW47XHJcblx0bW92ZVRocmVzaG9sZEhvcjogbnVtYmVyO1xyXG5cdG1vdmVUaHJlc2hvbGRWZXJ0OiBudW1iZXI7XHJcblx0YXV0b0hpZGU6IGJvb2xlYW47XHJcblx0YXV0b0hpZGVSaWJib246IGJvb2xlYW47XHJcblx0YXV0b01pblJvb3RXaWR0aDogYm9vbGVhbjtcclxuXHRtaW5Sb290V2lkdGg6IG51bWJlcjtcclxuXHRkYmxDbGlja0RlbGF5OiBudW1iZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBFVFNTZXR0aW5ncyA9IHtcclxuXHR1c2VSaWdodE1vdXNlOiB0cnVlLFxyXG5cdHVzZU1pZGRsZU1vdXNlOiB0cnVlLFxyXG5cdG1vdmVUaHJlc2hvbGRIb3I6IDUwLFxyXG5cdG1vdmVUaHJlc2hvbGRWZXJ0OiA1MCxcclxuXHRhdXRvSGlkZTogdHJ1ZSxcclxuXHRhdXRvSGlkZVJpYmJvbjogdHJ1ZSxcclxuXHRhdXRvTWluUm9vdFdpZHRoOiB0cnVlLFxyXG5cdG1pblJvb3RXaWR0aDogMzAwLFxyXG5cdGRibENsaWNrRGVsYXk6IDQ1MCxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVhc3l0b2dnbGVTaWRlYmFyIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogRVRTU2V0dGluZ3M7XHJcblx0cmliYm9uSWNvbkVsITogSFRNTEVsZW1lbnQgfCBudWxsO1xyXG5cdHByaXZhdGUgc3RhcnRYOiBudW1iZXIgPSAwO1xyXG5cdHByaXZhdGUgc3RhcnRZOiBudW1iZXIgPSAwO1xyXG5cdHByaXZhdGUgZW5kWDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGVuZFk6IG51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBpc1RyYWNraW5nID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBkaXN0YW5jZVggPSAwO1xyXG5cdHByaXZhdGUgZGlzdGFuY2VZID0gMDtcclxuXHRwcml2YXRlIG1vdmVkWCA9IGZhbHNlO1xyXG5cdHByaXZhdGUgbW92ZWRZID0gZmFsc2U7XHJcblx0cHJpdmF0ZSBkb3VibGVDbGlja1RpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG5cdHByaXZhdGUgY2xpY2tlZDogbnVtYmVyID0gMDtcclxuXHRwcml2YXRlIGNsaWNrVGltZW91dDogUmV0dXJuVHlwZTx0eXBlb2Ygc2V0VGltZW91dD4gfCBudWxsID0gbnVsbDtcclxuXHRwcml2YXRlIHByZXZpb3VzQWN0aXZlU3BsaXRMZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbDtcclxuXHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRVRTU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuYXV0b0hpZGVSaWJib24pIHtcclxuXHRcdFx0dGhpcy5hdXRvSGlkZU9OKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsIFwibW91c2Vkb3duXCIsIHRoaXMubW91c2Vkb3duSGFuZGxlcik7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJtb3VzZW1vdmVcIiwgdGhpcy5tb3VzZW1vdmVIYW5kbGVyKTtcclxuXHRcdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCBcIm1vdXNldXBcIiwgdGhpcy5tb3VzZXVwSGFuZGxlcik7XHJcblxyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXHJcblx0XHRcdFx0ZG9jdW1lbnQsXHJcblx0XHRcdFx0XCJkYmxjbGlja1wiLFxyXG5cdFx0XHRcdGFzeW5jIChldnQpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudG9nZ2xlUmlnaHRTaWRlYmFyKGV2dClcclxuXHRcdFx0XHR9XHJcblx0XHRcdCk7XHJcblxyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXHJcblx0XHRcdFx0ZG9jdW1lbnQud2luLFxyXG5cdFx0XHRcdFwiY2xpY2tcIixcclxuXHRcdFx0XHRhc3luYyAoZXZ0KSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5jbGlja1RpbWVvdXQpIHtcclxuXHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lb3V0KTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIXRoaXMuY2xpY2tlZCkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNsaWNrZWQgPSAxO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5jbGlja2VkKys7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0dGhpcy5jbGlja1RpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuY2xpY2tlZCA9PT0gMykge1xyXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuZ29Ub0V4cGxvcmVyVGFiLmJpbmQodGhpcykoZXZ0KTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmNsaWNrZWQgPT09IDIpIHtcclxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnRvZ2dsZVBpbi5iaW5kKHRoaXMpKGV2dCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0dGhpcy5jbGlja2VkID0gMDtcclxuXHRcdFx0XHRcdH0sIDQwMCk7IC8vIFRlbXBzIGVuIG1pbGxpc2Vjb25kZXMgcG91ciByZWNvbm5hXHUwMEVFdHJlIHVuIHRyaXBsZSBjbGljXHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cclxuXHJcblx0XHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdFx0aWQ6IFwidG9nZ2xlLWJvdGgtc2lkZWJhcnNcIixcclxuXHRcdFx0XHRuYW1lOiBcIlRvZ2dsZSBib3RoIHNpZGViYXJzXCIsXHJcblx0XHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMudG9nZ2xlQm90aFNpZGViYXJzKCk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5hdXRvSGlkZSkge1xyXG5cdFx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJjbGlja1wiLCB0aGlzLmF1dG9IaWRlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxyXG5cdFx0XHRcdCh0aGlzLmFwcCBhcyBhbnkpLndvcmtzcGFjZS5vbihcInJlc2l6ZVwiLCAoKSA9PiB0aGlzLm9uUmVzaXplKCkpXHJcblx0XHRcdCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdG1vdXNlZG93bkhhbmRsZXIgPSAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRpZiAoZXZ0LmJ1dHRvbiA9PT0gMCkgcmV0dXJuO1xyXG5cdFx0dGhpcy5yZWluaXRpYWxpemUoKTtcclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXM7XHJcblx0XHRjb25zdCBSTUIgPSBzZXR0aW5ncy51c2VSaWdodE1vdXNlO1xyXG5cdFx0Y29uc3QgTU1CID0gc2V0dGluZ3MudXNlTWlkZGxlTW91c2U7XHJcblx0XHRpZiAoKE1NQiAmJiBldnQuYnV0dG9uID09PSAxKSB8fCAoUk1CICYmIGV2dC5idXR0b24gPT09IDIpKSB7XHJcblx0XHRcdHRoaXMuc3RhcnRYID0gZXZ0LmNsaWVudFg7XHJcblx0XHRcdHRoaXMuc3RhcnRZID0gZXZ0LmNsaWVudFk7XHJcblx0XHRcdHRoaXMuaXNUcmFja2luZyA9IHRydWU7XHJcblx0XHRcdHRoaXMuZG91YmxlQ2xpY2tUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuZG91YmxlQ2xpY2tUaW1lciA9IG51bGw7XHJcblx0XHRcdFx0dGhpcy5yZW1vdmVDb250ZXh0TWVudUxpc3RlbmVyKCk7XHJcblx0XHRcdH0sIHRoaXMuc2V0dGluZ3MuZGJsQ2xpY2tEZWxheSk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0bW91c2Vtb3ZlSGFuZGxlciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRpZiAoIXRoaXMuaXNUcmFja2luZykgcmV0dXJuO1xyXG5cclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXM7XHJcblx0XHR0aGlzLmVuZFggPSBlLmNsaWVudFg7XHJcblx0XHR0aGlzLmVuZFkgPSBlLmNsaWVudFk7XHJcblxyXG5cdFx0dGhpcy5kaXN0YW5jZVggPSBNYXRoLmFicyh0aGlzLmVuZFggLSB0aGlzLnN0YXJ0WCk7XHJcblx0XHR0aGlzLmRpc3RhbmNlWSA9IE1hdGguYWJzKHRoaXMuZW5kWSAtIHRoaXMuc3RhcnRZKTtcclxuXHJcblx0XHR0aGlzLm1vdmVkWCA9IHRoaXMuZGlzdGFuY2VYID4gc2V0dGluZ3MubW92ZVRocmVzaG9sZEhvcjtcclxuXHRcdHRoaXMubW92ZWRZID0gdGhpcy5kaXN0YW5jZVkgPiBzZXR0aW5ncy5tb3ZlVGhyZXNob2xkVmVydDtcclxuXHJcblx0XHRpZiAodGhpcy5tb3ZlZFggfHwgdGhpcy5tb3ZlZFkpIHtcclxuXHRcdFx0dGhpcy5hZGRDb250ZXh0TWVudUxpc3RlbmVyKCk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0bW91c2V1cEhhbmRsZXIgPSAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcblx0XHRpZiAoIXRoaXMuaXNUcmFja2luZykgcmV0dXJuO1xyXG5cdFx0dGhpcy5pc1RyYWNraW5nID0gZmFsc2U7IC8vdG8gc3RvcCBvcGVyYXRpb25zIG9uIG1vdXNlbW92ZUhhbmRsZXIgYW5kIHRoaXMgb25lXHJcblxyXG5cdFx0Y29uc3QgeyBzZXR0aW5ncyB9ID0gdGhpcztcclxuXHRcdGNvbnN0IFJNQiA9IHNldHRpbmdzLnVzZVJpZ2h0TW91c2U7XHJcblx0XHRjb25zdCBNTUIgPSBzZXR0aW5ncy51c2VNaWRkbGVNb3VzZTtcclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdCgoTU1CICYmIGV2dC5idXR0b24gPT09IDEpIHx8IChSTUIgJiYgZXZ0LmJ1dHRvbiA9PT0gMikpICYmXHJcblx0XHRcdGV2dC5kZXRhaWwgPT09IDFcclxuXHRcdClcclxuXHRcdFx0aWYgKFxyXG5cdFx0XHRcdCh0aGlzLmRpc3RhbmNlWCA+IHNldHRpbmdzLm1vdmVUaHJlc2hvbGRIb3IgJiZcclxuXHRcdFx0XHRcdHRoaXMuZW5kWCA8IHRoaXMuc3RhcnRYKSB8fFxyXG5cdFx0XHRcdCh0aGlzLmRpc3RhbmNlWSA+IHNldHRpbmdzLm1vdmVUaHJlc2hvbGRWZXJ0ICYmXHJcblx0XHRcdFx0XHR0aGlzLmVuZFkgPCB0aGlzLnN0YXJ0WSlcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0dGhpcy50b2dnbGUodGhpcy5nZXRMZWZ0U3BsaXQoKSwgMik7XHJcblx0XHRcdH0gZWxzZSBpZiAoXHJcblx0XHRcdFx0KHRoaXMuZGlzdGFuY2VYID4gc2V0dGluZ3MubW92ZVRocmVzaG9sZEhvciAmJlxyXG5cdFx0XHRcdFx0dGhpcy5lbmRYID4gdGhpcy5zdGFydFgpIHx8XHJcblx0XHRcdFx0KHNldHRpbmdzLm1vdmVUaHJlc2hvbGRWZXJ0ICYmIHRoaXMuZW5kWSA+IHRoaXMuc3RhcnRZKVxyXG5cdFx0XHQpIHtcclxuXHRcdFx0XHR0aGlzLnRvZ2dsZSh0aGlzLmdldFJpZ2h0U3BsaXQoKSwgMik7XHJcblx0XHRcdFx0dGhpcy5yZW1vdmVDb250ZXh0TWVudUxpc3RlbmVyKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdCgoTU1CICYmIGV2dC5idXR0b24gPT09IDEpIHx8IChSTUIgJiYgZXZ0LmJ1dHRvbiA9PT0gMikpICYmXHJcblx0XHRcdGV2dC5kZXRhaWwgPT09IDIgJiZcclxuXHRcdFx0dGhpcy5kb3VibGVDbGlja1RpbWVyXHJcblx0XHQpIHtcclxuXHRcdFx0dGhpcy5hZGRDb250ZXh0TWVudUxpc3RlbmVyKCk7XHJcblx0XHRcdHRoaXMudG9nZ2xlQm90aFNpZGViYXJzKCk7XHJcblx0XHRcdHRoaXMucmVtb3ZlQ29udGV4dE1lbnVMaXN0ZW5lcigpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGF1dG9IaWRlT04gPSAoKSA9PiB7XHJcblx0XHRjb25zdCB7IHNldHRpbmdzIH0gPSB0aGlzO1xyXG5cdFx0dGhpcy5yaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oXHJcblx0XHRcdFwibW92ZS1ob3Jpem9udGFsXCIsXHJcblx0XHRcdFwiYXV0b0hpZGUgc3dpdGNoZXJcIixcclxuXHRcdFx0YXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdHNldHRpbmdzLmF1dG9IaWRlID0gIXNldHRpbmdzLmF1dG9IaWRlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0dGhpcy50b2dnbGVBdXRvSGlkZUV2ZW50KCk7XHJcblx0XHRcdFx0dGhpcy50b2dnbGVDb2xvcigpO1xyXG5cdFx0XHRcdG5ldyBOb3RpY2UoXHJcblx0XHRcdFx0XHRzZXR0aW5ncy5hdXRvSGlkZVxyXG5cdFx0XHRcdFx0XHQ/IFwiQXV0b0hpZGUgRW5hYmxlZFwiXHJcblx0XHRcdFx0XHRcdDogXCJBdXRvSGlkZSBEaXNhYmxlZFwiLFxyXG5cdFx0XHRcdFx0MjAwMFxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHRcdCk7XHJcblx0XHR0aGlzLnRvZ2dsZUNvbG9yKCk7XHJcblx0fTtcclxuXHJcblx0dG9nZ2xlQ29sb3IoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzLmF1dG9IaWRlXHJcblx0XHRcdD8gdGhpcy5yaWJib25JY29uRWw/LmFkZENsYXNzKFwicmliYm9uLWNvbG9yXCIpXHJcblx0XHRcdDogdGhpcy5yaWJib25JY29uRWw/LnJlbW92ZUNsYXNzKFwicmliYm9uLWNvbG9yXCIpO1xyXG5cdH1cclxuXHJcblx0dG9nZ2xlQXV0b0hpZGVFdmVudCA9ICgpID0+IHtcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmF1dG9IaWRlKSB7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgXCJjbGlja1wiLCB0aGlzLmF1dG9IaWRlKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmF1dG9IaWRlKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRjb250ZXh0bWVudUhhbmRsZXIoZXZ0OiBNb3VzZUV2ZW50KSB7XHJcblx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHR9XHJcblxyXG5cdGFkZENvbnRleHRNZW51TGlzdGVuZXIoKSB7XHJcblx0XHRyZXR1cm4gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFwiY29udGV4dG1lbnVcIixcclxuXHRcdFx0dGhpcy5jb250ZXh0bWVudUhhbmRsZXIsXHJcblx0XHRcdHRydWVcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRyZWluaXRpYWxpemUoKSB7XHJcblx0XHR0aGlzLnN0YXJ0WCA9IDA7XHJcblx0XHR0aGlzLnN0YXJ0WSA9IDA7XHJcblx0XHR0aGlzLmVuZFggPSAwO1xyXG5cdFx0dGhpcy5lbmRZID0gMDtcclxuXHRcdHRoaXMuaXNUcmFja2luZyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5kaXN0YW5jZVggPSAwO1xyXG5cdFx0dGhpcy5kaXN0YW5jZVkgPSAwO1xyXG5cdFx0dGhpcy5tb3ZlZFggPSBmYWxzZTtcclxuXHRcdHRoaXMubW92ZWRZID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRyZW1vdmVDb250ZXh0TWVudUxpc3RlbmVyKGRlbGF5ID0gMjApIHtcclxuXHRcdGlmICh0aGlzLm1vdmVkWCB8fCB0aGlzLm1vdmVkWSB8fCB0aGlzLmRvdWJsZUNsaWNrVGltZXIpXHJcblx0XHRcdHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHRcdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuXHRcdFx0XHRcdFwiY29udGV4dG1lbnVcIixcclxuXHRcdFx0XHRcdHRoaXMuY29udGV4dG1lbnVIYW5kbGVyLFxyXG5cdFx0XHRcdFx0dHJ1ZVxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdFx0dGhpcy5tb3ZlZFggPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLm1vdmVkWSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuZG91YmxlQ2xpY2tUaW1lciA9IG51bGw7XHJcblx0XHRcdH0sIGRlbGF5KTtcclxuXHR9XHJcblxyXG5cdHRvZ2dsZUJvdGhTaWRlYmFycygpIHtcclxuXHRcdGNvbnN0IGlzTGVmdE9wZW4gPSB0aGlzLmlzT3Blbih0aGlzLmdldExlZnRTcGxpdCgpKTtcclxuXHRcdGNvbnN0IGlzUmlnaHRPcGVuID0gdGhpcy5pc09wZW4odGhpcy5nZXRSaWdodFNwbGl0KCkpO1xyXG5cdFx0aWYgKGlzTGVmdE9wZW4gJiYgIWlzUmlnaHRPcGVuKSB7XHJcblx0XHRcdHRoaXMudG9nZ2xlKHRoaXMuZ2V0TGVmdFNwbGl0KCkpO1xyXG5cdFx0fSBlbHNlIGlmIChpc1JpZ2h0T3BlbiAmJiAhaXNMZWZ0T3Blbikge1xyXG5cdFx0XHR0aGlzLnRvZ2dsZSh0aGlzLmdldFJpZ2h0U3BsaXQoKSk7XHJcblx0XHR9IGVsc2UgaWYgKGlzUmlnaHRPcGVuICYmIGlzTGVmdE9wZW4pIHtcclxuXHRcdFx0dGhpcy50b2dnbGUodGhpcy5nZXRMZWZ0U3BsaXQoKSk7XHJcblx0XHRcdHRoaXMudG9nZ2xlKHRoaXMuZ2V0UmlnaHRTcGxpdCgpKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMudG9nZ2xlKHRoaXMuZ2V0TGVmdFNwbGl0KCksIDEpO1xyXG5cdFx0XHR0aGlzLnRvZ2dsZSh0aGlzLmdldFJpZ2h0U3BsaXQoKSwgMSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRnZXRMZWZ0U3BsaXQoKSB7XHJcblx0XHRyZXR1cm4gKHRoaXMuYXBwIGFzIGFueSkud29ya3NwYWNlLmxlZnRTcGxpdDtcclxuXHR9XHJcblxyXG5cdGdldFJpZ2h0U3BsaXQoKSB7XHJcblx0XHRyZXR1cm4gKHRoaXMuYXBwIGFzIGFueSkud29ya3NwYWNlLnJpZ2h0U3BsaXQ7XHJcblx0fVxyXG5cclxuXHRnZXRSb290U3BsaXQoKSB7XHJcblx0XHRyZXR1cm4gKHRoaXMuYXBwIGFzIGFueSkud29ya3NwYWNlLnJvb3RTcGxpdDtcclxuXHR9XHJcblxyXG5cdG9uUmVzaXplKCkge1xyXG5cdFx0Y29uc3QgTFMgPSB0aGlzLmdldExlZnRTcGxpdCgpO1xyXG5cdFx0Y29uc3QgUlMgPSB0aGlzLmdldFJpZ2h0U3BsaXQoKTtcclxuXHRcdGNvbnN0IHsgc2V0dGluZ3MgfSA9IHRoaXM7XHJcblx0XHRjb25zdCB7IG1pblJvb3RXaWR0aCB9ID0gc2V0dGluZ3M7XHJcblxyXG5cdFx0aWYgKFxyXG5cdFx0XHQhc2V0dGluZ3MuYXV0b01pblJvb3RXaWR0aCB8fFxyXG5cdFx0XHQoIXRoaXMuaXNPcGVuKExTKSAmJiAhdGhpcy5pc09wZW4oUlMpKVxyXG5cdFx0KSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGNvbnN0IGVkaXRvcldpZHRoID0gdGhpcy5nZXRSb290U3BsaXQoKS5jb250YWluZXJFbC5jbGllbnRXaWR0aDtcclxuXHRcdGlmIChlZGl0b3JXaWR0aCA8IG1pblJvb3RXaWR0aCkge1xyXG5cdFx0XHRpZiAoTFMuY29udGFpbmVyRWwuY2xpZW50V2lkdGggPiAyMDApIHtcclxuXHRcdFx0XHRMUy5zZXRTaXplKDIwMCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKFJTLmNvbnRhaW5lckVsLmNsaWVudFdpZHRoID4gMjAwKSB7XHJcblx0XHRcdFx0UlMuc2V0U2l6ZSgyMDApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRpZiAoZWRpdG9yV2lkdGggPCBtaW5Sb290V2lkdGgpIHtcclxuXHRcdFx0Y29uc3QgdXBkYXRlZEVkaXRvcldpZHRoID1cclxuXHRcdFx0XHR0aGlzLmdldFJvb3RTcGxpdCgpLmNvbnRhaW5lckVsLmNsaWVudFdpZHRoO1xyXG5cdFx0XHRpZiAodXBkYXRlZEVkaXRvcldpZHRoIDw9IG1pblJvb3RXaWR0aCkge1xyXG5cdFx0XHRcdHRoaXMudG9nZ2xlQm90aFNpZGViYXJzKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHRvZ2dsZShzaWRlOiBXb3Jrc3BhY2VTaWRlZG9jaywgbW9kZTogbnVtYmVyID0gMCkge1xyXG5cdFx0c3dpdGNoIChtb2RlKSB7XHJcblx0XHRcdGNhc2UgMDogLy8gTW9kZSBjbG9zZVxyXG5cdFx0XHRcdHNpZGUuY29sbGFwc2UoKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAxOiAvLyBNb2RlIG9wZW5cclxuXHRcdFx0XHRzaWRlLmV4cGFuZCgpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlIDI6IC8vIE1vZGUgdG9nZ2xlXHJcblx0XHRcdFx0aWYgKHRoaXMuaXNPcGVuKHNpZGUpKSB7XHJcblx0XHRcdFx0XHRzaWRlLmNvbGxhcHNlKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHNpZGUuZXhwYW5kKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aXNPcGVuKHNpZGU6IFdvcmtzcGFjZVNpZGVkb2NrKSB7XHJcblx0XHRpZiAoc2lkZS5jb2xsYXBzZWQgPT0gdHJ1ZSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0ZWxzZSByZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdGF1dG9IaWRlID0gKGV2dDogYW55KSA9PiB7XHJcblx0XHRjb25zdCByb290U3BsaXRFbCA9IHRoaXMuZ2V0Um9vdFNwbGl0KCkuY29udGFpbmVyRWw7XHJcblx0XHRjb25zdCBjbGlja2VkRWxlbWVudCA9IGV2dC50YXJnZXQ7XHJcblx0XHQvL1Jvb3QgYm9keSBjb250ZW50IG9ubHlcclxuXHRcdGNvbnN0IGlzQm9keSA9IGNsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImNtLWNvbnRlbnRcIik7XHJcblx0XHRjb25zdCBpc0xpbmUgPSBjbGlja2VkRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbS1saW5lXCIpO1xyXG5cdFx0Y29uc3QgaXNMaW5rID0gY2xpY2tlZEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY20tdW5kZXJsaW5lXCIpOyAvLyBsaW5rc1xyXG5cdFx0Y29uc3QgaXNSb290ID0gcm9vdFNwbGl0RWwuY29udGFpbnMoY2xpY2tlZEVsZW1lbnQpO1xyXG5cdFx0aWYgKCFpc1Jvb3QpIHJldHVybjtcclxuXHRcdGlmIChpc0xpbmUgfHwgaXNCb2R5IHx8IGlzTGluaykge1xyXG5cdFx0XHRjb25zdCBsZWZ0U3BsaXQgPSB0aGlzLmdldExlZnRTcGxpdCgpO1xyXG5cdFx0XHRjb25zdCByaWdodFNwbGl0ID0gdGhpcy5nZXRSaWdodFNwbGl0KCk7XHJcblx0XHRcdGlmICghbGVmdFNwbGl0LmNvbGxhcHNlZCB8fCAhcmlnaHRTcGxpdC5jb2xsYXBzZWQpIHtcclxuXHRcdFx0XHR0aGlzLnRvZ2dsZUJvdGhTaWRlYmFycygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0dG9nZ2xlUmlnaHRTaWRlYmFyID0gKGV2dDogYW55KSA9PiB7XHJcblx0XHRjb25zdCBjbGlja2VkRWxlbWVudCA9IGV2dC50YXJnZXQ7XHJcblx0XHRjb25zdCBpc1JpYmJvbiA9IGNsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIndvcmtzcGFjZS1yaWJib25cIik7XHJcblx0XHRpZiAoaXNSaWJib24pIHtcclxuXHRcdFx0Y29uc3QgbGVmdFNwbGl0ID0gdGhpcy5nZXRMZWZ0U3BsaXQoKTtcclxuXHRcdFx0dGhpcy50b2dnbGUobGVmdFNwbGl0LCAyKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHRnb1RvRXhwbG9yZXJUYWIgPSBhc3luYyAoZXZ0OiBhbnkpID0+IHtcclxuXHRcdGNvbnN0IGNsaWNrZWRFbGVtZW50ID0gZXZ0LnRhcmdldDtcclxuXHRcdGNvbnN0IGlzTGVmdFNwbGl0ID0gY2xpY2tlZEVsZW1lbnQuY2xvc2VzdChcIi5tb2QtbGVmdC1zcGxpdFwiKTtcclxuXHRcdGlmIChpc0xlZnRTcGxpdCkge1xyXG5cdFx0XHRjb25zdCBhY3RpdmVMZWZ0U3BsaXQgPSB0aGlzLmdldEFjdGl2ZVNpZGViYXJMZWFmLmJpbmQodGhpcykoKVswXVxyXG5cdFx0XHRjb25zdCBpc0V4cGxvcmVyTGVhZiA9IGFjdGl2ZUxlZnRTcGxpdD8uZ2V0Vmlld1N0YXRlKCkudHlwZSA9PT0gJ2ZpbGUtZXhwbG9yZXInXHJcblx0XHRcdGlmIChpc0V4cGxvcmVyTGVhZikge1xyXG5cdFx0XHRcdGlmICh0aGlzLnByZXZpb3VzQWN0aXZlU3BsaXRMZWFmKSB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZih0aGlzLnByZXZpb3VzQWN0aXZlU3BsaXRMZWFmKVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGNvbnN0IGV4cGxvcmVyTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2ZpbGUtZXhwbG9yZXInKVswXTtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihleHBsb3JlckxlYWYpXHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5wcmV2aW91c0FjdGl2ZVNwbGl0TGVhZiA9IGFjdGl2ZUxlZnRTcGxpdFxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cclxuXHR0b2dnbGVQaW4gPSBhc3luYyAoZXZ0OiBhbnkpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKFwiaWNpXCIpXHJcblx0XHRjb25zdCBjbGlja2VkRWxlbWVudCA9IGV2dC50YXJnZXQ7XHJcblx0XHRjb25zdCBpc1RhYmhlYWRlciA9IGNsaWNrZWRFbGVtZW50LmNsb3Nlc3QoXCIud29ya3NwYWNlLXRhYi1oZWFkZXItaW5uZXItdGl0bGVcIik7XHJcblx0XHRjb25zb2xlLmxvZyhcImNsaWNrZWRcIilcclxuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShWaWV3KT8ubGVhZlxyXG5cdFx0Ly8gY29uc3QgYWN0aXZlTGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmXHJcblx0XHRjb25zdCB7IGlzTWFpbldpbmRvdywgcm9vdFNwbGl0IH0gPSB0aGlzLmdldExlYWZQcm9wZXJ0aWVzKGFjdGl2ZUxlYWYpXHJcblx0XHRjb25zdCBjb25kaXRpb24gPSBpc01haW5XaW5kb3cgJiYgcm9vdFNwbGl0IHx8ICFpc01haW5XaW5kb3dcclxuXHRcdGlmIChhY3RpdmVMZWFmICYmIGNvbmRpdGlvbikgeyBhY3RpdmVMZWFmLnRvZ2dsZVBpbm5lZCgpIH1cclxuXHJcblx0fVxyXG5cclxuXHRnZXRMZWFmUHJvcGVydGllcyhcclxuXHRcdGxlYWY6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQsXHJcblx0KToge1xyXG5cdFx0aXNNYWluV2luZG93OiBib29sZWFuO1xyXG5cdFx0cm9vdFNwbGl0OiBib29sZWFuO1xyXG5cdH0ge1xyXG5cdFx0Y29uc3QgaXNNYWluV2luZG93ID0gbGVhZj8udmlldy5jb250YWluZXJFbC53aW4gPT09IHdpbmRvdztcclxuXHRcdGNvbnN0IHJvb3RTcGxpdCA9IGxlYWY/LmdldFJvb3QoKSA9PT0gdGhpcy5hcHAud29ya3NwYWNlLnJvb3RTcGxpdDtcclxuXHRcdHJldHVybiB7IGlzTWFpbldpbmRvdywgcm9vdFNwbGl0IH07XHJcblx0fVxyXG5cclxuXHRnZXRBY3RpdmVTaWRlYmFyTGVhZigpOiBXb3Jrc3BhY2VMZWFmW10ge1xyXG5cdFx0Y29uc3QgbGVmdFJvb3QgPSB0aGlzLmFwcC53b3Jrc3BhY2UubGVmdFNwbGl0LmdldFJvb3QoKVxyXG5cdFx0Y29uc3QgbGVhdmVzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXVxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKGxlYWYuZ2V0Um9vdCgpID09IGxlZnRSb290ICYmIGxlYWYudmlldy5jb250YWluZXJFbC5jbGllbnRXaWR0aCA+IDApIHtcclxuXHRcdFx0XHRsZWF2ZXMucHVzaChsZWFmKVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0cmV0dXJuIGxlYXZlc1xyXG5cdH1cclxuXHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxyXG5cdFx0XHR7fSxcclxuXHRcdFx0REVGQVVMVF9TRVRUSU5HUyxcclxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkRGF0YSgpXHJcblx0XHQpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgRWFzeXRvZ2dsZVNpZGViYXIsIHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCIuL21haW5cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFVFNTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBFYXN5dG9nZ2xlU2lkZWJhcjtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRWFzeXRvZ2dsZVNpZGViYXIpIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiRWFzeSBUb2dnbGUgU2lkZWJhclwiIH0pO1xyXG5cdFx0Y29uc3QgY29udGVudCA9IGA8YnI+V2l0aCBSaWdodE1vdXNlQnV0dG9uIG9yIE1pZGRsZU1vdXNlQnV0dG9uIDo8YnI+XHJcblx0XHQ8dWw+XHJcbiAgICAgICAgICAgIDxsaT5kb3VibGUgY2xpY2sgdG8gdG9nZ2xlIGJvdGggc2lkZWJhcnMgPC9saT5cclxuXHRcdFx0PGxpPmNsaWNrIGFuZCBtb3ZlIHRvd2FyZCB0aGUgc2lkZUJhciB5b3Ugd2FudCB0byB0b2dnbGU8L2xpPlxyXG4gICAgICAgICAgICA8bGk+eW91IGNhbiBkbyBwcmV2aW91cyBvcGVyYXRpb25zIGZyb20gdGhlIHJpYmJvbiBiYXIgdXNpbmcgZG91YmxlIGNsaWMgYW5kIHZlcnRpY2FsIG1vdmVzICh1cC9kb3duKS4gdGhpcyBpcyB1c2VmdWwgd2hlbiBpbiBjYW52YXM8L2xpPlxyXG4gICAgICAgICAgICA8bGk+YXV0b0hpZGUgdG8gYXV0b21hdGljYWxseSBoaWRlIHNpZGViYXJzIHdoZW4gY2xpY2tpbmcgb24gdGhlIGVkaXRvcjwvbGk+XHJcbiAgICAgICAgICAgIDxsaT5yaWJib24gYmFyIGF1dG9IaWRlIGJ1dHRvbiBzd2l0Y2hlcjwvbGk+XHJcbiAgICAgICAgICAgIDxsaT5oaWRlIHNpZGViYXJzIHVuZGVyIGEgbWluaW1hbCBlZGl0b3IgV0lEVEg8L2xpPlxyXG5cdFx0PC91bD5cclxuXHRcdENvbW1hbmQgXCJ0b2dnbGUgYm90aCBzaWRlYmFyc1wiIGFkZGVkLlx0XHJcbiAgICAgICAgPGJyPjxicj5gO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZURpdihcIlwiLCAoZWw6IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcblx0XHRcdGVsLmlubmVySFRNTCA9IGNvbnRlbnQ7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJSaWdodCBNb3VzZVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIkFjdGl2YXRlcyBSaWdodCBNb3VzZSB0byB0cmlnZ2VyIG9wZXJhdGlvbnNcIilcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlUmlnaHRNb3VzZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlUmlnaHRNb3VzZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJNaWRkbGUgTW91c2VcIilcclxuXHRcdFx0LnNldERlc2MoXCJBY3RpdmF0ZXMgUmlnaHQgTW91c2UgdG8gdHJpZ2dlciBvcGVyYXRpb25zXCIpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZU1pZGRsZU1vdXNlKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VNaWRkbGVNb3VzZSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJIb3Jpem9udGFsIE1vdmUgdGhyZXNob2xkKHB4KVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcInRoZSBtb3N0IHVzZWRcIilcclxuXHRcdFx0LmFkZFNsaWRlcigoc2xpZGVyKSA9PiB7XHJcblx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHQuc2V0TGltaXRzKDUwLCA1MDAsIDEwKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vdmVUaHJlc2hvbGRIb3IpXHJcblx0XHRcdFx0XHQuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb3ZlVGhyZXNob2xkSG9yID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnRuKSA9PiB7XHJcblx0XHRcdFx0YnRuLnNldEljb24oXCJyZXNldFwiKVxyXG5cdFx0XHRcdFx0LnNldFRvb2x0aXAoXCJSZXNldCB0byBkZWZhdWx0XCIpXHJcblx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vdmVUaHJlc2hvbGRIb3IgPVxyXG5cdFx0XHRcdFx0XHRcdERFRkFVTFRfU0VUVElOR1MubW92ZVRocmVzaG9sZEhvcjtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIlZlcnRpY2FsIE1vdmUgdGhyZXNob2xkKHB4KVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcImNvdWxkIGJlIHVzZWQgaW4gcmliYm9uIGJhciwgd2hlbiB1c2luZyBjYW52YXNcIilcclxuXHRcdFx0LmFkZFNsaWRlcigoc2xpZGVyKSA9PiB7XHJcblx0XHRcdFx0c2xpZGVyXHJcblx0XHRcdFx0XHQuc2V0TGltaXRzKDUwLCA1MDAsIDEwKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vdmVUaHJlc2hvbGRWZXJ0KVxyXG5cdFx0XHRcdFx0LnNldER5bmFtaWNUb29sdGlwKClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW92ZVRocmVzaG9sZFZlcnQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidG4pID0+IHtcclxuXHRcdFx0XHRidG4uc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRvIGRlZmF1bHRcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW92ZVRocmVzaG9sZFZlcnQgPVxyXG5cdFx0XHRcdFx0XHRcdERFRkFVTFRfU0VUVElOR1MubW92ZVRocmVzaG9sZFZlcnQ7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJBdXRvIGhpZGVcIilcclxuXHRcdFx0LnNldERlc2MoXHJcblx0XHRcdFx0XCJBdXRvIGhpZGUgcGFuZWxzIHdoZW4gY2xpY2tpbmcgb24gdGhlIGVkaXRvci4gQWRkIGEgUmliYm9uIGljb24gdG8gc3dpdGNoIGF1dG9IaWRlXCJcclxuXHRcdFx0KVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvSGlkZVJpYmJvbilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0hpZGVSaWJib24gPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9IaWRlUmliYm9uKSB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0hpZGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnRvZ2dsZUF1dG9IaWRlRXZlbnQoKTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50b2dnbGVDb2xvcigpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmF1dG9IaWRlT04oKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yaWJib25JY29uRWw/LnJlbW92ZSgpO1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnJpYmJvbkljb25FbCA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b0hpZGUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi50b2dnbGVBdXRvSGlkZUV2ZW50KCk7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udG9nZ2xlQ29sb3IoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJNaW5pbWFsIGVkaXRvciB3aWR0aFwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRcIkhpZGUgcGFuZWwocykgaWYgdGhlIHByb3BvcnRpb24gb2YgdGhlIGVkaXRvciBpcyBsZXNzIHRoYW4gWCAodGhyZXNob2xkIGJlbG93KSB0aW1lcyB0aGUgd2luZG93IHNpemVcIlxyXG5cdFx0XHQpXHJcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG5cdFx0XHRcdHRvZ2dsZVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9NaW5Sb290V2lkdGgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9NaW5Sb290V2lkdGggPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiU2V0IGVkaXRvciBtaW4gd2lkdGhcIilcclxuXHRcdFx0LnNldERlc2MoXCJtaW4gd2lkdGggdHJpZ2dlcmluZyBhdXRvIHJlZHVjZS9jbG9zZSBzaWRlYmFyc1wiKVxyXG5cdFx0XHQuYWRkU2xpZGVyKChzbGlkZXIpID0+IHtcclxuXHRcdFx0XHRzbGlkZXJcclxuXHRcdFx0XHRcdC5zZXRMaW1pdHMoMjAwLCA4MDAsIDEwKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1pblJvb3RXaWR0aClcclxuXHRcdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1pblJvb3RXaWR0aCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oKGJ0bikgPT4ge1xyXG5cdFx0XHRcdGJ0bi5zZXRJY29uKFwicmVzZXRcIilcclxuXHRcdFx0XHRcdC5zZXRUb29sdGlwKFwiUmVzZXQgdG8gZGVmYXVsdFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5taW5Sb290V2lkdGggPVxyXG5cdFx0XHRcdFx0XHRcdERFRkFVTFRfU0VUVElOR1MubWluUm9vdFdpZHRoO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiZG91YmxlIGNsaWNrIGRlbGF5KG1zKVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcIm1heCBkZWxheSB0byB0cmlnZ2VyIGEgZG91YmxlIGNsaWNrXCIpXHJcblx0XHRcdC5hZGRTbGlkZXIoKHNsaWRlcikgPT4ge1xyXG5cdFx0XHRcdHNsaWRlclxyXG5cdFx0XHRcdFx0LnNldExpbWl0cygyMDAsIDYwMCwgMTApXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGJsQ2xpY2tEZWxheSlcclxuXHRcdFx0XHRcdC5zZXREeW5hbWljVG9vbHRpcCgpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRibENsaWNrRGVsYXkgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKChidG4pID0+IHtcclxuXHRcdFx0XHRidG4uc2V0SWNvbihcInJlc2V0XCIpXHJcblx0XHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHRvIGRlZmF1bHRcIilcclxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGJsQ2xpY2tEZWxheSA9XHJcblx0XHRcdFx0XHRcdFx0REVGQVVMVF9TRVRUSU5HUy5kYmxDbGlja0RlbGF5O1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0fVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFB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QUFDL0IsUUFBSSxLQUFLLGFBQWE7QUFBTSxhQUFPO0FBQUE7QUFDOUIsYUFBTztBQUFBLEVBQ2I7QUFBQSxFQTJEQSxrQkFDQyxNQUlDO0FBQ0QsVUFBTSxnQkFBZSw2QkFBTSxLQUFLLFlBQVksU0FBUTtBQUNwRCxVQUFNLGFBQVksNkJBQU0sZUFBYyxLQUFLLElBQUksVUFBVTtBQUN6RCxXQUFPLEVBQUUsY0FBYyxVQUFVO0FBQUEsRUFDbEM7QUFBQSxFQUVBLHVCQUF3QztBQUN2QyxVQUFNLFdBQVcsS0FBSyxJQUFJLFVBQVUsVUFBVSxRQUFRO0FBQ3RELFVBQU0sU0FBMEIsQ0FBQztBQUNqQyxTQUFLLElBQUksVUFBVSxpQkFBaUIsQ0FBQyxTQUFTO0FBQzdDLFVBQUksS0FBSyxRQUFRLEtBQUssWUFBWSxLQUFLLEtBQUssWUFBWSxjQUFjLEdBQUc7QUFDeEUsZUFBTyxLQUFLLElBQUk7QUFBQSxNQUNqQjtBQUFBLElBQ0QsQ0FBQztBQUNELFdBQU87QUFBQSxFQUNSO0FBQUEsRUFHQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU87QUFBQSxNQUN0QixDQUFDO0FBQUEsTUFDRDtBQUFBLE1BQ0EsTUFBTSxLQUFLLFNBQVM7QUFBQSxJQUNyQjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEOyIsCiAgIm5hbWVzIjogWyJFYXN5dG9nZ2xlU2lkZWJhciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiRWFzeXRvZ2dsZVNpZGViYXIiXQp9Cg==
